import{r,W as V,j as o,Y as X}from"./app-CxZcZGFP.js";import{S as g}from"./sweetalert2.all-DgwL1yNR.js";import{X as $}from"./index.es-CWTNR0QI.js";import{A as H}from"./AuthenticatedLayout-D3h_2Zw2.js";import{D as Y}from"./DangerButton-BwcGbpZf.js";import{F as f}from"./FormField-C-rVI5Un.js";import{I as q}from"./ImgField-Cha6jFKW.js";import{M as J,S as K}from"./SecondaryButton-DdZ3UcZ1.js";import{P as N}from"./PrimaryButton-mjHB4wFz.js";import{W as Q}from"./WarningButton-Cf2XMAPL.js";import{F as U}from"./Footer-eE2LFUBg.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-Ch00GJdv.js";import"./Logo-Cq6eGSiJ.js";import"./InputLabel-B967lV7i.js";import"./TextInput-BHXWJ73K.js";import"./InputError-lI_LXVty.js";import"./dialog-DdDju5n3.js";function Le({auth:v,lugarPartidos:C,torneo:t}){const[y,p]=r.useState(!1),[F,x]=r.useState(""),[S,k]=r.useState(1),[h,z]=r.useState(""),P=r.useRef(),w=r.useRef(),I=r.useRef(),R=r.useRef(),D={nomLugar:"",geolocalizacion:"",direccion:"",fotoLugar:null,fk_torneo:t[0].id},{data:i,setData:l,errors:n,delete:M,post:j,processing:L}=V(D),c=e=>{const{name:a,value:s}=e.target;l(m=>({...m,[a]:s}))},T=e=>{l("fotoLugar",e.target.files[0])},b=(e,a,s,m,O,W,Z)=>{p(!0),k(e),e===1?(x("Agregar Lugar Partido"),l({nomLugar:"",geolocalizacion:"",direccion:"",fotoLugar:null,fk_torneo:t[0].id})):(x("Editar Lugar Partido"),l({id:a,nomLugar:s,geolocalizacion:m,direccion:O,fotoLugar:W,fk_torneo:t[0].id}))},d=()=>{p(!1)},B=e=>{e.preventDefault(),S===1?j(route("lugarPartido.store"),{preserveScroll:!0,onSuccess:()=>{u("Lugar partido guardado.")}}):j(route("lugarPartido.updatepost",i.id),{preserveScroll:!0,onSuccess:()=>{u("Lugar partido actualizado.")}})},u=e=>{d(),g.fire({title:e,icon:"success"})},E=(e,a)=>{g.fire({title:`¿Estás seguro de eliminar ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(s=>{s.isConfirmed&&M(route("lugarPartido.destroy",e),{onSuccess:()=>{u("Lugar partido eliminado.")},onError:()=>{g.fire({title:"Error",text:"No se pudo eliminar el lugar partido.",icon:"error"})}})})},_=[{name:"#",selector:(e,a)=>a+1,sortable:!0},{name:"Nombre",selector:e=>e.nomLugar,sortable:!0},{name:"Geolocalización",cell:e=>o.jsx("a",{href:e.geolocalizacion,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Ver en Google Maps"}),sortable:!0},{name:"Dirección",selector:e=>e.direccion,sortable:!0},{name:"Foto lugar",cell:e=>o.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:o.jsx("img",{src:`/storage/${e.fotoLugar}`,alt:e.nomLugar,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Editar",cell:e=>o.jsx(Q,{onClick:()=>b(2,e.id,e.nomLugar,e.geolocalizacion,e.direccion,e.fotoLugar,e.fk_torneo),children:o.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0},{name:"Eliminar",cell:e=>o.jsx(Y,{onClick:()=>E(e.id,e.nomLugar),children:o.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0}],G=C.filter(e=>e.nomLugar.toLowerCase().includes(h.toLowerCase())),A={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return o.jsxs(H,{user:v.user,header:o.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Lugares Partidos para el torneo ",t[0].nombreTorneo," del ",t[0].fechaInicio," al ",t[0].fechaFin]}),children:[o.jsx(X,{title:"Lugar Partido"}),o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 mt-32",children:[o.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[o.jsx("div",{className:"flex justify-end mt-2 mb-3",children:o.jsxs(N,{onClick:()=>b(1),children:[o.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"})," Añadir Lugar"]})}),o.jsx("div",{className:"mb-4",children:o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre",value:h,onChange:e=>z(e.target.value)})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx($,{title:"Lugares Partidos",columns:_,data:G,pagination:!0,paginationComponentOptions:A,responsive:!0,fixedHeader:!0,noDataComponent:o.jsx("div",{children:"No hay lugares Registrados"})})})]}),o.jsxs(J,{show:y,onClose:d,children:[o.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:F}),o.jsxs("form",{onSubmit:B,className:"p-6",children:[o.jsx("input",{type:"text",value:i.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),o.jsx(f,{htmlFor:"nomLugar",label:"Nombre",id:"nomLugar",type:"text",name:"nomLugar",ref:P,placeholder:"Nombre del lugar",value:i.nomLugar,onChange:c,errorMessage:n.nomLugar}),o.jsx(f,{htmlFor:"geolocalizacion",label:"Geolocalización",id:"geolocalizacion",type:"text",name:"geolocalizacion",ref:w,placeholder:"Geolocalización",value:i.geolocalizacion,onChange:c,errorMessage:n.geolocalizacion}),o.jsx(f,{htmlFor:"direccion",label:"Dirección",id:"direccion",type:"text",name:"direccion",ref:I,placeholder:"Dirección",value:i.direccion,onChange:c,errorMessage:n.direccion}),o.jsx(q,{htmlFor:"fotoLugar",label:"Foto Lugar",id:"fotoLugar",name:"fotoLugar",ref:R,onChange:T,errorMessage:n.fotoLugar}),o.jsxs("div",{className:"flex justify-end mt-4",children:[o.jsx(K,{onClick:d,children:"Cancelar"}),o.jsx(N,{className:"ml-2",type:"submit",disabled:L,children:L?"Guardando...":"Guardar"})]})]})]})]})}),o.jsx(U,{})]})}export{Le as default};
