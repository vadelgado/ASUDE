import{r as t,W as Y,j as e,Y as J}from"./app-B7R3xKfR.js";import{S as h}from"./sweetalert2.all-BCuXndMg.js";import{X as K}from"./index.es-BrFSQNI4.js";import{A as Q}from"./AuthenticatedLayout-Y2T7n90j.js";import{F as g}from"./FormField-DdU7T2BP.js";import{I as Z}from"./ImgField-Pj38IbQw.js";import{S as ee}from"./SelectField-P0cQBvqh.js";import{M as oe}from"./Modal-CxfqK7zO.js";import{P as re}from"./PrimaryButton-Dmln_z9C.js";import"./Footer-Bc1XkYwF.js";import{G as te,C as se}from"./CancelarButton-CSosB64a.js";import{B as ie}from"./BackButton-Dguvam4A.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./Dropdown-CMXUyYL3.js";import"./transition-D2aQqEaI.js";import"./InputLabel-TKlKzBkH.js";import"./TextInput-Dk9zkqAb.js";import"./InputError-BugI7SpX.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./dialog-CeFeWAN5.js";function _e({auth:f,equipos:y,categorias:C,torneos:w,userRole:l}){const[k,x]=t.useState(!1),[_,b]=t.useState(""),[E,S]=t.useState(1),[j,F]=t.useState(""),A=t.useRef(),I=t.useRef(),W=t.useRef(),B=t.useRef(),M=t.useRef(),q={id:"",nombreEquipo:"",fk_categoria_equipo:"",escudoEquipo:null,numeroWhatsapp:"",correoElectronico:"",fk_user:f.user.id},{data:i,setData:c,delete:T,post:$,processing:R,errors:n}=Y(q),u=o=>{const{name:r,value:s}=o.target;c(a=>({...a,[r]:s}))},P=o=>{c("escudoEquipo",o.target.files[0])},v=(o,r,s,a,m,d,z,V)=>{x(!0),S(o),o===1?(b("Agregar Equipo"),c(q)):(b("Editar Equipo"),c({id:r,nombreEquipo:s,fk_categoria_equipo:a,escudoEquipo:m,numeroWhatsapp:d,correoElectronico:z,fk_user:V}))},p=()=>{x(!1)},D=o=>{o.preventDefault();let r="store",s="El equipo ha sido guardado.";E!==1&&(r="update",s="El equipo ha sido actualizado.");let a="equipos";l==="equipo"&&(a="equiposInvitados");const m=G(a,r),d={};E!==1&&(d.id=i.id),$(route(m,d),{preserveScroll:!0,onSuccess:()=>{N(s)},onError:()=>{error("Hubo un error al procesar la solicitud.")}})},G=(o,r)=>`${o}.${r}`,N=o=>{p(),h.fire({title:o,icon:"success"})},L=(o,r)=>{h.fire({title:"¬øEst√° seguro?",text:`¬øEst√° seguro que desea eliminar el equipo ${r}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S√≠",cancelButtonText:"No"}).then(s=>{s.isConfirmed&&T(route("equipos.destroy",o),{preserveScroll:!0,onSuccess:()=>{N("El equipo ha sido eliminado.")},onError:()=>{h.fire("¬°Error!","El equipo no ha sido eliminado.","error")}})})};[...w.map(o=>({value:o.id,label:o.nombreTorneo}))];const O=[{value:"",label:"Seleccione ...",disabled:!0},...C.map(o=>({value:o.id,label:o.descripcion}))],H=[{name:"No.",selector:(o,r)=>r+1,sortable:!0},{name:"Nombre del Equipo",selector:o=>o.nombreEquipo,sortable:!0,wrap:!0},{name:"Categor√≠a",selector:o=>o.descripcion,sortable:!0},{name:"Escudo del Equipo",selector:o=>e.jsx("img",{src:`/storage/${o.escudoEquipo}`,onError:r=>{r.target.onerror=null,r.target.src="/escudo.svg",r.target.style.filter="brightness(0.5)"},alt:o.nombreEquipo,className:"w-16 h-16 rounded-full"})},{name:"N√∫mero de WhatsApp",selector:o=>o.numeroWhatsapp,sortable:!0,wrap:!0},{name:"Correo Electr√≥nico",selector:o=>o.correoElectronico,sortable:!0,wrap:!0},{name:"Miembros del Equipo",cell:o=>e.jsx("button",{onClick:()=>{const r=l==="admin"?`/jugadoresAdmin?equipo_id=${o.id}`:`/jugadores?equipo_id=${o.id}`;window.location.href=r},className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white  focus:ring-4 focus:outline-none focus:ring-blue-300 ",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-users"})})})},{name:"Preinscribir",cell:o=>e.jsx("button",{onClick:()=>{const r=l==="admin"?`/inscripciones?equipo_id=${o.id}`:`/inscripcionesEquipo?equipo_id=${o.id}`;window.location.href=r},className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white  focus:ring-4 focus:outline-none focus:ring-cyan-200 ",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-book"})})})},{name:"Editar",cell:o=>e.jsx("button",{onClick:()=>v(2,o.id,o.nombreEquipo,o.fk_categoria_equipo,o.escudoEquipo,o.numeroWhatsapp,o.correoElectronico,o.fk_user),className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})},l==="admin"&&{name:"Eliminar",cell:o=>e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",onClick:()=>L(o.id,o.nombreEquipo),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})}].filter(Boolean),U=y.filter(o=>o.nombreEquipo.toLowerCase().includes(j.toLowerCase())),X={rowsPerPageText:"Registros por p√°gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(Q,{user:f.user,header:e.jsx("h2",{className:"text-2xl font-semibold leading-tight text-gray-800",children:"‚öΩ Equipos ü•Ö"}),children:[e.jsx(J,{title:"‚öΩ Equipos ü•Ö"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-1 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Lista de Equipos"}),e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(re,{onClick:()=>v(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Agregar"]}),e.jsx(ie,{to:route("dashboard")})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre Equipo...",value:j,onChange:o=>F(o.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(K,{title:"Equipos",columns:H,data:U,pagination:!0,paginationComponentOptions:X,highlightOnHover:!0,responsive:!0,noDataComponent:"Usted no ha subido ning√∫n Equipo. üëÄ"})})]}),e.jsxs(oe,{show:k,onClose:p,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:_}),e.jsxs("form",{onSubmit:D,className:"p-6",encType:"multipart/form-data",children:[e.jsx(g,{htmlFor:"nombreEquipo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Nombre del Equipo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"nombreEquipo",type:"text",ref:A,name:"nombreEquipo",placeholder:"Nombre del Equipo",value:i.nombreEquipo,onChange:u,errorMessage:n.nombreEquipo}),e.jsx(ee,{htmlFor:"fk_categoria_equipo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Categor√≠a"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_categoria_equipo",ref:I,name:"fk_categoria_equipo",value:i.fk_categoria_equipo,onChange:u,errorMessage:n.fk_categoria_equipo,options:O}),e.jsx(Z,{htmlFor:"escudoEquipo",label:"Escudo del Equipo",id:"escudoEquipo",ref:W,name:"escudoEquipo",imageUrl:i.escudoEquipo,value:i.escudoEquipo,onChange:P,errorMessage:n.escudoEquipo}),e.jsx(g,{htmlFor:"numeroWhatsApp",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"N√∫mero de WhatsApp"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"numeroWhatsApp",type:"number",ref:B,name:"numeroWhatsapp",placeholder:"N√∫mero de WhatsApp",value:i.numeroWhatsapp,onChange:u,errorMessage:n.numeroWhatsapp}),e.jsx(g,{htmlFor:"correoElectronico",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Correo Electr√≥nico"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"correoElectronico",type:"email",ref:M,name:"correoElectronico",placeholder:"Correo Electr√≥nico",value:i.correoElectronico,onChange:u,errorMessage:n.correoElectronico}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(te,{processing:R.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(se,{onClick:p,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{_e as default};
