import{r as a,W as G,j as e,Y as I}from"./app-DDWAxr0O.js";import{S as p}from"./sweetalert2.all-z0A-IzJY.js";import{A as V}from"./AuthenticatedLayout-25vPjUJU.js";import{D as Y}from"./DangerButton-ZZR714Xu.js";import"./FormField-Dkxp4lIt.js";import{M as H,S as J}from"./SecondaryButton-nHkmApVW.js";import{P as j}from"./PrimaryButton-DeQ-lA9j.js";import{W as K}from"./WarningButton-CFaWasVy.js";import{S as g}from"./SelectField-_h3w3KYV.js";import{T as L}from"./Textarea2-CE9lyQDJ.js";import"./transition-DFnG931F.js";import"./Logo-DrEgFXuP.js";import"./InputLabel-ChKXdU0T.js";import"./TextInput-COB0oSW7.js";import"./InputError-tTg0-KzI.js";import"./dialog-BF5Oivp2.js";import"./emotion-unitless.esm-sScrWPmR.js";function pe({auth:v,fk_programaciones_faces_id:y,faltas_cuerpo_tecnicos:x,cuerpoTecnico:N,fk_amonestaciones_t_c_s_id:k}){const[S,u]=a.useState(!1),[C,h]=a.useState(""),[F,T]=a.useState(1),M=a.useRef(),E=a.useRef(),w=a.useRef(),_={fk_programaciones_faces_id:y[0].id,fk_cuerpo_tecnico_id:"",fk_amonestaciones_t_c_s_id:"",observaciones:""},{data:o,setData:i,errors:t,delete:A,post:B,put:D,processing:f}=G(_),c=s=>{const{name:r,value:d}=s.target;i(m=>({...m,[r]:d}))},b=(s,r,d,m,q,z)=>{u(!0),T(s),s===1?(h("Agregar Fase"),i(_)):(h("Editar Fase"),i({id:r,fk_programaciones_faces_id:d,fk_cuerpo_tecnico_id:m,fk_amonestaciones_t_c_s_id:q,observaciones:z}))},n=()=>{u(!1)},O=s=>{s.preventDefault(),F===1?B(route("faltasCuerpoTecnico.store"),{preserveScroll:!0,onSuccess:()=>{l("Falta guardada.")}}):D(route("faltasCuerpoTecnico.update",o.id),{preserveScroll:!0,onSuccess:()=>{l("Falta actualizada")}})},l=s=>{n(),p.fire({title:s,icon:"success"})},R=s=>{p.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&A(route("faltasCuerpoTecnico.destroy",s),{onSuccess:()=>{l("Falta Eliminada eliminada.")},onError:()=>{p.fire({title:"Error",text:"No se pudo eliminar la Falta.",icon:"error"})}})})},P=[{value:"",label:"Seleccione un miembro"},...N.map(s=>({value:s.id,label:s.nombreCompleto+" - "+s.nombreEquipo}))],W=[{value:"",label:"Seleccione un tipo de amonestación"},...k.map(s=>({value:s.id,label:" - "+s.valor+s.description}))];return e.jsxs(V,{user:v.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Faltas Cuerpo Técnico"}),children:[e.jsx(I,{title:"Faltas Cuerpo Técnico"}),e.jsx("div",{className:"grid bg-white v-screen place-items-center",children:e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(j,{onClick:()=>b(1),children:e.jsx("i",{className:"fa-solid fa-plus-circle",children:" Añadir Falta"})})})}),e.jsx("div",{className:"grid py-6 bg-white v-screen place-items-center",children:e.jsxs("table",{className:"border-gray-400 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-2",children:"#"}),e.jsx("th",{className:"px-2 py-2",children:"Nombre"}),e.jsx("th",{className:"px-2 py-2",children:"Tipo Amonestación"}),e.jsx("th",{className:"px-2 py-2",children:"Observaciones"}),e.jsx("th",{className:"px-2 py-2",children:"Acciones"})]})}),e.jsx("tbody",{children:x.length>0?x.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border border-gray-400",children:r+1}),e.jsx("td",{className:"px-4 py-2 border border-gray-400",children:s.nombreCompleto}),e.jsxs("td",{className:"px-4 py-2 border border-gray-400",children:[s.description," - ",s.value]}),e.jsx("td",{className:"px-4 py-2 border border-gray-400",children:s.observaciones}),e.jsx("td",{className:"px-4 py-2 border border-gray-400",children:e.jsx(K,{onClick:()=>b(2,s.id,s.fk_programaciones_faces_id,s.fk_cuerpo_tecnico_id,s.fk_amonestaciones_t_c_s_id,s.observaciones),children:e.jsx("i",{className:"fa-solid fa-pencil"})})}),e.jsx("td",{className:"px-4 py-2 border border-gray-400",children:e.jsx(Y,{onClick:()=>R(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-2 text-center border",children:"No hay Faltas Registradas"})})})]})}),e.jsxs(H,{show:S,onClose:n,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:C}),e.jsxs("form",{onSubmit:O,className:"p-6",children:[e.jsx("input",{type:"text",value:o.fk_programaciones_faces_id,name:"fk_programaciones_faces_id",readOnly:!0,className:"hidden"}),e.jsx(g,{htmlFor:"fk_cuerpo_tecnico_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Miembro"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_cuerpo_tecnico_id",ref:M,name:"fk_cuerpo_tecnico_id",value:o.fk_cuerpo_tecnico_id,onChange:c,options:P,errorMessage:t.fk_cuerpo_tecnico_id}),e.jsx(g,{htmlFor:"fk_amonestaciones_t_c_s_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Tipo Amonestación"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_amonestaciones_t_c_s_id",ref:E,name:"fk_amonestaciones_t_c_s_id",value:o.fk_amonestaciones_t_c_s_id,onChange:c,options:W,errorMessage:t.fk_amonestaciones_t_c_s_id}),e.jsx(L,{htmlFor:"observaciones",label:"Observaciones",id:"observaciones",ref:w,name:"observaciones",value:o.observaciones||"",onChange:c,errorMessage:t.observaciones,placeholder:"Escribe las observaciones"}),e.jsx("div",{className:"mt-6",children:e.jsx(j,{processing:f?"true":"false",className:"mt-2",children:e.jsx("i",{className:"fa-solid fa-save",children:f?" Procesando...":" Guardar"})})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(J,{onClick:n,children:"Cancelar"})})]})]})]})}export{pe as default};
