import{r,W as G,j as e,Y as U}from"./app-DDWAxr0O.js";import{S as x}from"./sweetalert2.all-z0A-IzJY.js";import{A as Y}from"./AuthenticatedLayout-25vPjUJU.js";import{D as J}from"./DangerButton-ZZR714Xu.js";import{F as P}from"./FormField-Dkxp4lIt.js";import{S as h}from"./SelectField-_h3w3KYV.js";import{M as K,S as Q}from"./SecondaryButton-nHkmApVW.js";import{P as N}from"./PrimaryButton-DeQ-lA9j.js";import{F as X}from"./Footer-D9OzLELn.js";import{W as Z}from"./WarningButton-CFaWasVy.js";import"./transition-DFnG931F.js";import"./Logo-DrEgFXuP.js";import"./InputLabel-ChKXdU0T.js";import"./TextInput-COB0oSW7.js";import"./InputError-tTg0-KzI.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./dialog-BF5Oivp2.js";function ge({auth:y,fase:p,programaciones:_,equipos:ee,lugares:v,cantidadEquipos:F}){const[S,u]=r.useState(!1),[k,f]=r.useState(""),[C,w]=r.useState(1),E=r.useRef(),H=r.useRef(),M=r.useRef(),B=r.useRef(),L=r.useRef(),j={fk_fase:p[0].id,posicion_local:"",posicion_visitante:"",FechaPartido:"",HoraPartido:"",fk_lugarPartido:""},{data:t,setData:l,errors:i,delete:R,post:D,put:q,processing:T}=G(j),o=s=>{const{name:a,value:d}=s.target;l(m=>({...m,[a]:d}))},g=(s,a,d,m,V,W,O,z)=>{u(!0),w(s),s===1?(f("Programar Partido"),l(j)):s===2&&(f("Editar Partido"),l({id:a,fk_fase:d,posicion_local:m,posicion_visitante:V,FechaPartido:W,HoraPartido:O,fk_lugarPartido:z}))},n=()=>{u(!1)},I=s=>{s.preventDefault(),C===1?D(route("programacionesFaces.store"),{preserveScroll:!0,onSuccess:()=>{c("Partido guardado.")}}):q(route("programacionesFaces.update",t.id),{preserveScroll:!0,onSuccess:()=>{c("Partido actualizado.")}})},c=s=>{n(),x.fire({title:s,icon:"success"})},$=s=>{x.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&R(route("programacionesFaces.destroy",s),{preserveScroll:!0,onSuccess:()=>{c("Partido eliminado.")},onError:()=>{x.fire({title:"Error",text:"No se pudo eliminar el partido.",icon:"error"})}})})},b=[{value:"",label:"Seleccione ...",disabled:!0},...Array.from({length:F},(s,a)=>({value:a+1,label:`Equipo ${a+1}`}))],A=[{value:"",label:"Seleccione un lugar"},...v.map(s=>({value:s.id,label:s.nomLugar}))];return e.jsxs(Y,{user:y.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Programación de Partidos - ",p[0].nombreFase]}),children:[e.jsx(U,{title:"Programación Torneo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto mt-32",children:[e.jsx("div",{className:"grid bg-white v-screen place-items-center",children:e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsxs(N,{onClick:()=>g(1),children:[e.jsx("i",{className:"fa-solid fa-plus-circle"}),"Programar Partido"]})})}),e.jsx("div",{className:"grid py-6 bg-white v-screen place-items-center",children:e.jsxs("table",{className:"border-gray-400 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"#"}),e.jsx("th",{className:"px-4 py-2 border",children:"Local"}),e.jsx("th",{className:"px-4 py-2 border",children:"Visitante"}),e.jsx("th",{className:"px-4 py-2 border",children:"Fecha"}),e.jsx("th",{className:"px-4 py-2 border",children:"Hora"}),e.jsx("th",{className:"px-4 py-2 border",children:"Lugar"}),e.jsx("th",{className:"px-2 py-2 border",children:"Editar"}),e.jsx("th",{className:"px-2 py-2 border",children:"Eliminar"}),e.jsx("th",{className:"px-2 py-2 border",children:"Resultados"})]})}),e.jsx("tbody",{children:_.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border",children:a+1}),e.jsx("td",{className:"px-4 py-2 border",children:s.posicion_local}),e.jsx("td",{className:"px-4 py-2 border",children:s.posicion_visitante}),e.jsx("td",{className:"px-4 py-2 border",children:s.FechaPartido}),e.jsx("td",{className:"px-4 py-2 border",children:new Date(`1970-01-01T${s.HoraPartido}`).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}),e.jsx("td",{className:"px-4 py-2 border",children:s.nomLugar}),e.jsx("td",{className:"px-2 py-2 border",children:e.jsx(Z,{onClick:()=>g(2,s.id,s.fk_fase,s.posicion_local,s.posicion_visitante,s.FechaPartido,s.HoraPartido,s.fk_lugarPartido),children:e.jsx("i",{className:"fa-solid fa-pencil"})})}),e.jsx("td",{className:"px-2 py-2 border",children:e.jsx(J,{onClick:()=>$(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsx("a",{className:"text-white bg-[#050708] hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center  me-2 mb-2",href:`/resultadosPartidos?partido=${s.id}&torneo=${s.torneo_id}`,children:e.jsx("i",{className:"fa-regular fa-flag",children:" "})})})]},s.id))})]})}),e.jsxs(K,{show:S,onClose:n,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:k}),e.jsxs("form",{onSubmit:I,className:"p-6",children:[e.jsx("input",{type:"text",value:t.fk_fase,name:"fk_fase",readOnly:!0,className:"hidden"}),i.fk_fase&&e.jsx("p",{className:"text-red-500",children:i.fk_fase}),e.jsx(h,{htmlFor:"posicion_local",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Equipo Local"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"posicion_local",ref:E,name:"posicion_local",value:t.posicion_local,onChange:o,options:b,errorMessage:i.posicion_local}),e.jsx(h,{htmlFor:"posicion_visitante",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Equipo Visitante"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"posicion_visitante",ref:H,name:"posicion_visitante",value:t.posicion_visitante,onChange:o,options:b,errorMessage:i.posicion_visitante}),e.jsx(P,{htmlFor:"FechaPartido",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Fecha del Partido"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),type:"date",id:"FechaPartido",ref:M,name:"FechaPartido",value:t.FechaPartido,onChange:o,errorMessage:i.FechaPartido}),e.jsx(P,{htmlFor:"HoraPartido",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Hora del Partido"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),type:"time",id:"HoraPartido",ref:B,name:"HoraPartido",value:t.HoraPartido,onChange:o,errorMessage:i.HoraPartido}),e.jsx(h,{htmlFor:"fk_lugarPartido",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Lugar del Partido"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_lugarPartido",ref:L,name:"fk_lugarPartido",value:t.fk_lugarPartido,onChange:o,options:A,errorMessage:i.fk_lugarPartido}),e.jsxs("div",{className:"flex items-center justify-end mt-4",children:[e.jsx(Q,{onClick:n,children:"Cancelar"}),e.jsx(N,{className:"ml-4",type:"submit",disabled:T,children:"Guardar"})]})]})]})]})}),e.jsx(X,{})]})}export{ge as default};
