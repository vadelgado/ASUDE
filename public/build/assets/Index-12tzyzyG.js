import{r as t,W as U,j as e}from"./app-CpscUkhH.js";import{S as _}from"./sweetalert2.all-vgUrIAgS.js";import{A as X}from"./AuthenticatedLayout-CN2hbycP.js";import{F as x}from"./FormField-CYGdgTtV.js";import{S as Y}from"./SelectField-BHi6LQ7R.js";import{M as Z}from"./Modal-YmEBGxuH.js";import{P as w}from"./PrimaryButton-DBRMAumo.js";import{S as ee}from"./SecondaryButton-BlkoG59s.js";import{T as se}from"./Textarea2-D-iF6p1I.js";import"./Footer-CUzeveoC.js";import{B as re}from"./BackButton-DOzZAPC1.js";import"./Dropdown-Bag3bUoI.js";import"./transition-DFaYZSng.js";import"./InputLabel-DgFhPcYt.js";import"./TextInput-BRJ60Nu1.js";import"./InputError-BhrALRB9.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./dialog-B1i_YR6N.js";function _e({auth:C,jugadores:S,idPartido:b,resultados:k,partidoInfo:l}){const[R,u]=t.useState(!1),[E,p]=t.useState(""),[j,T]=t.useState(""),[q,M]=t.useState(1),P=t.useRef(),B=t.useRef(),$=t.useRef(),F=t.useRef(),O=t.useRef(),h={fk_programaciones_faces_id:b[0].id,fk_jugador_id:"",goles:"",tarjetas_amarillas:"",tarjetas_rojas:"",observaciones:""},{data:o,setData:n,errors:d,delete:A,post:G,put:L,processing:g}=U(h),i=s=>{const{name:r,value:a}=s.target;n(m=>({...m,[r]:a}))},f=(s,r,a,m,W,K,Q)=>{u(!0),M(s),s===1?(p("Nuevo Resultado"),n(h)):(p("Editar Resultado"),n({id:r,fk_programaciones_faces_id:b[0].id,fk_jugador_id:a,goles:m,tarjetas_amarillas:W,tarjetas_rojas:K,observaciones:Q}))},c=()=>{u(!1)},D=s=>{s.preventDefault(),q===1?G(route("resultadosPartidos.store"),{preserveScroll:!0,onSuccess:()=>{y("Resultado creado correctamente")}}):L(route("resultadosPartidos.update",o.id),{preserveScroll:!0,onSuccess:()=>{y("Resultado actualizado correctamente")}})},y=s=>{c(),_.fire("¡Correcto!",s,"success")},H=s=>{_.fire({title:"¿Estás seguro?",text:"No podrás revertir esto",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&A(route("resultadosPartidos.destroy",s))})},J=[{value:"",label:"Seleccione ..."},...S.filter(s=>s.estado===1).map(s=>({value:s.id,label:`${s.nombreCompleto} - ${s.nombreEquipo}`}))],V=s=>{T(s.target.value)},z=k.reduce((s,r)=>{const a=`${r.fk_jugador_id}-${r.nombreEquipo}`;return s[a]||(s[a]={...r,goles:0,tarjetas_amarillas:0,tarjetas_rojas:0}),s[a].goles+=r.goles,s[a].tarjetas_amarillas+=r.tarjetas_amarillas,s[a].tarjetas_rojas+=r.tarjetas_rojas,s},{}),N=Object.values(z),v=N.filter(s=>s.nombreCompleto.toLowerCase().includes(j.toLowerCase())),I=N.reduce((s,r)=>(s[r.nombreEquipo]||(s[r.nombreEquipo]=0),s[r.nombreEquipo]+=r.goles,s),{});return e.jsx(X,{user:C.user,children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between p-4 mb-4 text-blue-800 border border-blue-200 rounded-lg shadow-lg md:flex-row md:p-6 bg-gradient-to-r from-blue-100 to-blue-50",children:[e.jsxs("div",{className:"flex items-center mb-2 md:mb-0",children:[e.jsx("i",{className:"mr-3 text-blue-600 fa-solid fa-circle-info fa-lg"}),e.jsx("span",{className:"text-lg font-semibold",children:"Nota:"})]}),e.jsx("span",{className:"text-sm text-center md:text-base md:text-left",children:"Si un equipo no ha anotado goles en un partido, por favor, registre 0 a cualquier integrante de este. Este valor indica que el equipo no logró anotar durante el juego."})]}),e.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-1 bg-white",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between mb-6 md:flex-row md:items-center",children:[e.jsx("h3",{className:"mb-2 text-xl font-semibold text-gray-800 md:text-2xl md:mb-0",children:`Partido: ${l.equipoLocal} vs ${l.equipoVisitante}`}),e.jsxs("div",{className:"text-sm text-gray-600 md:text-right md:ml-6",children:[e.jsx("div",{children:`Fecha: ${l.FechaPartido}`}),e.jsx("div",{children:`Hora: ${l.HoraPartido}`}),e.jsx("div",{children:`Lugar: ${l.nomLugar}`})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-between mb-4 space-y-2 md:flex-row md:space-y-0 md:space-x-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:j,onChange:V,className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm md:w-auto focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(w,{onClick:()=>f(1),className:"flex items-center",children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Nuevo Resultado"]}),e.jsx(re,{to:route("dashboard")})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm leading-normal text-left text-gray-600 uppercase bg-blue-50",children:[e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Equipo"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Jugador"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Goles"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Tarjetas Amarillas"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Tarjetas Rojas"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Observaciones"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Editar"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Eliminar"})]})}),e.jsx("tbody",{className:"text-gray-700",children:v.length>0?v.map(s=>e.jsxs("tr",{className:"transition-colors hover:bg-blue-50",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.nombreEquipo}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.nombreCompleto}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.goles}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.tarjetas_amarillas}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.tarjetas_rojas}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s.observaciones}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 focus:outline-none",onClick:()=>f(2,s.id,s.fk_jugador_id,s.goles,s.tarjetas_amarillas,s.tarjetas_rojas,s.observaciones),children:e.jsx("i",{className:"fa-solid fa-edit"})})}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("button",{className:"text-red-600 hover:text-red-900 focus:outline-none",onClick:()=>H(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-4 py-4 text-center border-b border-gray-200",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"mt-8 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm leading-normal text-left text-gray-600 uppercase bg-blue-50",children:[e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Equipo"}),e.jsx("th",{className:"px-4 py-3 border-b border-gray-200",children:"Total de Goles"})]})}),e.jsx("tbody",{className:"text-gray-700",children:Object.entries(I).map(([s,r])=>e.jsxs("tr",{className:"transition-colors hover:bg-blue-50",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:s}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-200",children:r>0?r:"0 (Ningún gol anotado)"})]},s))})]})})]}),e.jsxs(Z,{show:R,onClose:c,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:E}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[e.jsx("input",{type:"text",value:o.fk_programaciones_faces_id,name:"fk_programaciones_faces_id",readOnly:!0,hidden:!0}),e.jsx(Y,{label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Jugador"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_jugador_id",ref:P,name:"fk_jugador_id",value:o.fk_jugador_id,onChange:i,errorMessage:d.fk_jugador_id,options:J}),e.jsx(x,{label:"Goles",id:"goles",type:"number",name:"goles",ref:B,placeholder:"Goles",value:o.goles,onChange:i,errorMessage:d.goles}),e.jsx(x,{label:"Tarjetas Amarillas",id:"tarjetas_amarillas",type:"number",name:"tarjetas_amarillas",ref:$,placeholder:"Tarjetas Amarillas",value:o.tarjetas_amarillas,onChange:i,errorMessage:d.tarjetas_amarillas}),e.jsx(x,{label:"Tarjetas Rojas",id:"tarjetas_rojas",type:"number",name:"tarjetas_rojas",ref:F,placeholder:"Tarjetas Rojas",value:o.tarjetas_rojas,onChange:i,errorMessage:d.tarjetas_rojas}),e.jsx(se,{label:"Observaciones",type:"text",ref:O,name:"observaciones",value:o.observaciones,onChange:i,errorMessage:d.observaciones}),e.jsx("div",{className:"mt-6",children:e.jsx(w,{processing:g?"true":"false",className:"mt-2",children:e.jsx("i",{className:"fa-solid fa-save",children:g?" Procesando...":" Guardar"})})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(ee,{onClick:c,children:"Cancelar"})})]})]})]})})})}export{_e as default};
