import{r as s,W as J,j as o,Y as K}from"./app-7rU0G_I8.js";import{S as f}from"./sweetalert2.all-DVa67-UG.js";import{X as Q}from"./index.es-BS2Z0L4r.js";import{A as Z}from"./AuthenticatedLayout-L6D7471O.js";import{D as ee}from"./DangerButton-DVNYYib4.js";import{F as h}from"./FormField-BEXfSlrC.js";import{I as oe}from"./ImgField-CWcpXTPu.js";import{S as re}from"./SelectField-BkMGVqu8.js";import{M as se,S as te}from"./SecondaryButton-B_p2I0xs.js";import{P as C}from"./PrimaryButton-aNIWIVBo.js";import{W as ie}from"./WarningButton-B9TC4SHd.js";import{F as ae}from"./Footer-CpRmstS0.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-BZd35j9q.js";import"./Logo-D_Jsbtp_.js";import"./InputLabel-DQMKk8NV.js";import"./TextInput-CKFLz-7k.js";import"./InputError-oxPWCKOk.js";import"./dialog-3LhKMUvB.js";function ye({auth:x,equipos:_,categorias:S,torneos:y,userRole:m}){const[k,g]=s.useState(!1),[W,E]=s.useState(""),[b,A]=s.useState(1),[q,F]=s.useState(""),I=s.useRef(),T=s.useRef(),M=s.useRef(),w=s.useRef(),B=s.useRef(),j={id:"",nombreEquipo:"",fk_categoria_equipo:"",escudoEquipo:null,numeroWhatsapp:"",correoElectronico:"",fk_user:x.user.id},{data:t,setData:l,delete:$,post:R,processing:P,errors:n}=J(j),c=e=>{const{name:r,value:i}=e.target;l(a=>({...a,[r]:i}))},D=e=>{l("escudoEquipo",e.target.files[0])},N=(e,r,i,a,p,u,V,Y)=>{g(!0),A(e),e===1?(E("Agregar Equipo"),l(j)):(E("Editar Equipo"),l({id:r,nombreEquipo:i,fk_categoria_equipo:a,escudoEquipo:p,numeroWhatsapp:u,correoElectronico:V,fk_user:Y}))},d=()=>{g(!1)},L=e=>{e.preventDefault();let r="store",i="El equipo ha sido guardado.";b!==1&&(r="update",i="El equipo ha sido actualizado.");let a="equipos";m==="equipo"&&(a="equiposInvitados");const p=O(a,r),u={};b!==1&&(u.id=t.id),R(route(p,u),{preserveScroll:!0,onSuccess:()=>{v(i)},onError:()=>{error("Hubo un error al procesar la solicitud.")}})},O=(e,r)=>`${e}.${r}`,v=e=>{d(),f.fire({title:e,icon:"success"})},H=(e,r)=>{f.fire({title:"¬øEst√° seguro?",text:`¬øEst√° seguro que desea eliminar el equipo ${r}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S√≠",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&$(route("equipos.destroy",e),{preserveScroll:!0,onSuccess:()=>{v("El equipo ha sido eliminado.")},onError:()=>{f.fire("¬°Error!","El equipo no ha sido eliminado.","error")}})})};[...y.map(e=>({value:e.id,label:e.nombreTorneo}))];const U=[{value:"",label:"Seleccione ...",disabled:!0},...S.map(e=>({value:e.id,label:e.descripcion}))],X=[{name:"No.",selector:(e,r)=>r+1,sortable:!0},{name:"Nombre del Equipo",selector:e=>e.nombreEquipo,sortable:!0},{name:"Categor√≠a",selector:e=>e.descripcion,sortable:!0},{name:"Escudo del Equipo",selector:e=>o.jsx("img",{src:`/storage/${e.escudoEquipo}`,onError:r=>{r.target.onerror=null,r.target.src="/escudo.svg",r.target.style.filter="brightness(0.5)"},alt:e.nombreEquipo,className:"w-16 h-16 rounded-full"})},{name:"N√∫mero de WhatsApp",selector:e=>e.numeroWhatsapp,sortable:!0},{name:"Correo Electr√≥nico",selector:e=>e.correoElectronico,sortable:!0},{name:"Preinscribir",cell:e=>m==="admin"?o.jsxs("a",{className:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2.5 text-center inline-flex items-center",href:`/inscripciones?equipo_id=${e.id}`,children:[o.jsx("i",{className:"mr-2 fa-solid fa-book"}),"Torneos"]}):o.jsxs("a",{className:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2.5 text-center inline-flex items-center",href:`/inscripcionesEquipo?equipo_id=${e.id}`,children:[o.jsx("i",{className:"mr-2 fa-solid fa-book"}),"Torneos"]})},{name:"Editar",cell:e=>o.jsx(ie,{onClick:()=>N(2,e.id,e.nombreEquipo,e.fk_categoria_equipo,e.escudoEquipo,e.numeroWhatsapp,e.correoElectronico,e.fk_user),children:o.jsx("i",{className:"fa-solid fa-edit"})})},{name:"Eliminar",cell:e=>o.jsx(ee,{onClick:()=>H(e.id,e.nombreEquipo),children:o.jsx("i",{className:"fa-solid fa-trash"})})},{name:"Miembros del Equipo",cell:e=>o.jsx("a",{href:m==="admin"?`/jugadoresAdmin?equipo_id=${e.id}`:`/jugadores?equipo_id=${e.id}`,className:"text-blue-600 hover:text-blue-900",children:o.jsx("i",{className:"fa-solid fa-users"})})}],z=_.filter(e=>e.nombreEquipo.toLowerCase().includes(q.toLowerCase())),G={rowsPerPageText:"Registros por p√°gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return o.jsxs(Z,{user:x.user,header:o.jsx("h2",{className:"text-2xl font-semibold leading-tight text-gray-800",children:"‚öΩ Equipos ü•Ö"}),children:[o.jsx(K,{title:"‚öΩ Equipos ü•Ö"}),o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto mt-32",children:[o.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-1 bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"Lista de Equipos"}),o.jsxs(C,{onClick:()=>N(1),children:[o.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Agregar"]})]}),o.jsx("div",{className:"mb-4",children:o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre Equipo...",value:q,onChange:e=>F(e.target.value)})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx(Q,{title:"Equipos",columns:X,data:z,pagination:!0,paginationComponentOptions:G,highlightOnHover:!0,responsive:!0,noDataComponent:"Usted no ha subido ning√∫n Equipo. üëÄ"})})]}),o.jsxs(se,{show:k,onClose:d,children:[o.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:W}),o.jsxs("form",{onSubmit:L,className:"p-6",encType:"multipart/form-data",children:[o.jsx(h,{htmlFor:"nombreEquipo",label:"Nombre del Equipo",id:"nombreEquipo",type:"text",ref:I,name:"nombreEquipo",placeholder:"Nombre del Equipo",value:t.nombreEquipo,onChange:c,errorMessage:n.nombreEquipo}),o.jsx(re,{htmlFor:"fk_categoria_equipo",label:"Categor√≠a",id:"fk_categoria_equipo",ref:T,name:"fk_categoria_equipo",value:t.fk_categoria_equipo,onChange:c,errorMessage:n.fk_categoria_equipo,options:U}),o.jsx(oe,{htmlFor:"escudoEquipo",label:"Escudo del Equipo",id:"escudoEquipo",ref:M,name:"escudoEquipo",value:t.escudoEquipo,onChange:D,errorMessage:n.escudoEquipo,imageUrl:t.escudoEquipo?`http://127.0.0.1:8000/storage/${t.escudoEquipo}`:null}),o.jsx(h,{htmlFor:"numeroWhatsApp",label:"N√∫mero de WhatsApp",id:"numeroWhatsApp",type:"number",ref:w,name:"numeroWhatsapp",placeholder:"N√∫mero de WhatsApp",value:t.numeroWhatsapp,onChange:c,errorMessage:n.numeroWhatsapp}),o.jsx(h,{htmlFor:"correoElectronico",label:"Correo Electr√≥nico",id:"correoElectronico",type:"email",ref:B,name:"correoElectronico",placeholder:"Correo Electr√≥nico",value:t.correoElectronico,onChange:c,errorMessage:n.correoElectronico}),o.jsx("div",{className:"mt-4",children:o.jsxs(C,{processing:P.toString(),className:"mt-2",children:[o.jsx("i",{className:"fa-solid fa-save"}),"Guardar"]})}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx(te,{onClick:d,children:"Cancelar"})})]})]})]})}),o.jsx(ae,{})]})}export{ye as default};
