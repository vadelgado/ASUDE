import{r as t,W,j as e,Y}from"./app-C5p2IS-n.js";import{S as f}from"./sweetalert2.all-D6xpsO36.js";import{X as J}from"./index.es-BOnTbiGm.js";import{A as K}from"./AuthenticatedLayout-DgXqvCIj.js";import{D as Q}from"./DangerButton-B2gKTOog.js";import"./FormField-DYlk2ziV.js";import{S}from"./SelectField-kh3TfBV_.js";import{M as U,S as Z}from"./SecondaryButton-BuaM7ncQ.js";import{P as h}from"./PrimaryButton-D-hNl-RM.js";import{T as ee}from"./Textarea2-CzSq-Uk0.js";import{F as oe}from"./Footer-DzaosTLm.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-B1z0TWIx.js";import"./Logo-BBLRZALq.js";import"./InputLabel-C3LARUVo.js";import"./TextInput-Cdsvucuw.js";import"./InputError-DFx-UEFv.js";import"./dialog-CMDnRUi3.js";function Te({auth:r,torneo:T,equipo:a,inscripciones:y,fk_equipo:E,userRole:g}){const[N,b]=t.useState(!1),[C,j]=t.useState(""),[k,P]=t.useState(1),w=t.useRef(),R=t.useRef(),q=t.useRef(),v={fk_user:r.user.id,fk_torneo:"",fk_equipo:E,estadoInscripcion:"",observacion:""},{data:n,setData:c,errors:l,delete:F,post:_,put:$,processing:se}=W(v),d=o=>{const{name:s,value:i}=o.target;c(x=>({...x,[s]:i}))},I=(o,s,i,x,G,V)=>{b(!0),P(o),o===1?(j("Realizar Pre Inscripción"),c(v)):(j("Editar Pre Inscripción"),c({id:s,fk_torneo:i,fk_equipo:x,estadoInscripcion:G,observacion:V}))},m=()=>{b(!1)},M=o=>{o.preventDefault(),k===1?_(g==="admin"?route("inscripciones.store"):route("inscripcionesEquipo.store"),{preserveScroll:!0,onSuccess:()=>{p("Pre Inscripción realizada correctamente")}}):$(g==="admin"?route("inscripciones.update",n.id):route("inscripcionesEquipo.update",n.id),{preserveScroll:!0,onSuccess:()=>{p("Pre Inscripción actualizada correctamente")}})},p=o=>{m(),f.fire({title:o,icon:"success"})},z=[{value:"",label:"Seleccione un torneo"},...T.map(o=>({value:o.id,label:`${o.nombreTorneo} - ${o.estadoTorneo}`}))],[u,re]=t.useState(null),A=[{value:"",label:"Seleccione un estado"},{value:"Pendiente",label:"Pendiente"},{value:"Aceptada",label:"Aceptada"},{value:"Rechazada",label:"Rechazada"}],B=(o,s)=>{f.fire({title:`¿Estás seguro de eliminar la inscripcion al torneo ${s}?`,text:"No podrás revertir esto",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&F(route("inscripciones.destroy",o),{onSuccess:()=>{p("Inscripcion eliminada correctamente")},onError:()=>{f.fire({title:"Error",text:"El jugador no ha sido eliminado",icon:"error"})}})})},O=[{name:"#",selector:(o,s)=>s+1,sortable:!0},{name:"Torneo",selector:o=>o.nombreTorneo,sortable:!0},{name:"Estado",selector:o=>o.estadoInscripcion,sortable:!0,cell:o=>e.jsx("span",{className:`flex gap-x-2 rounded-full text-xs text-white py-1 px-2 ${o.estadoInscripcion==="Pendiente"?"bg-yellow-600":o.estadoInscripcion==="Aceptada"?"bg-green-600":o.estadoInscripcion==="Rechazada"?"bg-red-600":""}`,children:o.estadoInscripcion})},{name:"Observación",selector:o=>o.observacion},...r.user.role==="admin"?[{name:"Editar",cell:o=>e.jsx(h,{onClick:()=>I(2,o.id,o.fk_torneo,o.fk_equipo,o.estadoInscripcion,o.observacion),children:"Editar"})},{name:"Eliminar",cell:o=>e.jsx(Q,{onClick:()=>B(o.id,o.nombreTorneo),children:e.jsx("i",{className:"fa-solid fa-trash"})})}]:[]],D={rows:{style:{minHeight:"72px"}},headCells:{style:{paddingLeft:"8px",paddingRight:"8px"}},cells:{style:{paddingLeft:"8px",paddingRight:"8px"}}},L={rowsPerPageText:"Filas por página",rangeSeparatorText:"de",noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},H=e.jsx("input",{type:"text",placeholder:"Buscar por Torneo",className:"p-2 border border-gray-300 rounded-lg",onChange:o=>c({...n,search:o.target.value})}),X=y.filter(o=>{var s;return o.nombreTorneo&&o.nombreTorneo.toLowerCase().includes(((s=n.search)==null?void 0:s.toLowerCase())||"")});return e.jsxs(K,{user:r.user,header:e.jsx("div",{className:"flex items-center justify-center px-2 py-1",children:e.jsxs("h2",{className:"flex items-center text-xl font-semibold leading-tight text-gray-800",children:["Pre Inscripciones equipo",["admin","equipo"].includes(r.user.role)&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`/storage/${a.escudoEquipo}`,alt:`Escudo equipo ${a.nombreEquipo}`,className:"w-10 h-10 ml-2 rounded-full"}),a.nombreEquipo]})]})}),children:[e.jsx(Y,{title:"Programación Torneo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 mt-32",children:[e.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsxs(h,{onClick:()=>I(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Realizar Pre Inscripción"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[H,e.jsx(J,{columns:O,data:X,customStyles:D,pagination:!0,paginationComponentOptions:L,highlightOnHover:!0,responsive:!0,striped:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay Inscripciones para mostrar"})})]})]}),e.jsxs(U,{show:N,onClose:m,children:[e.jsxs("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:[C,e.jsx("img",{src:`/storage/${a.escudoEquipo}`,alt:`Escudo equipo ${a.nombreEquipo}`,className:"w-10 h-10 ml-2 rounded-full"}),a.nombreEquipo]}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[["admin","equipo"].includes(r.user.role)&&e.jsx(S,{htmlFor:"fk_torneo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Torneo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_torneo",ref:w,name:"fk_torneo",value:n.fk_torneo,onChange:d,options:z,errorMessage:l.fk_torneo}),r.user.role==="equipo"&&u&&e.jsx("img",{className:"w-1/2 mx-auto mt-4 h-1/2",src:`/storage/${u.flayer}`,alt:`Torneo ⚽ ${u.nombreTorneo}`}),r.user.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{htmlFor:"estadoInscripcion",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Estado Inscripción"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"estadoInscripcion",ref:R,name:"estadoInscripcion",value:n.estadoInscripcion||"",onChange:d,options:A,errorMessage:l.estadoInscripcion}),e.jsx(ee,{htmlFor:"observacion",label:"Observación",id:"observacion",ref:q,name:"observacion",placeholder:"Observación",value:n.observacion||"",onChange:d,errorMessage:l.observacion})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(Z,{onClick:m,children:"Cancelar"}),e.jsx(h,{type:"submit",className:"ml-2",children:"Guardar"})]})]})]})]})}),e.jsx(oe,{})]})}export{Te as default};
