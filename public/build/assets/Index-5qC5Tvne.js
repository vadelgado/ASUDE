import{r as t,W as U,j as e}from"./app-B7R3xKfR.js";import{S as _}from"./sweetalert2.all-BCuXndMg.js";import{A as X}from"./AuthenticatedLayout-Y2T7n90j.js";import{F as p}from"./FormField-DdU7T2BP.js";import{S as Y}from"./SelectField-P0cQBvqh.js";import{M as Z}from"./Modal-CxfqK7zO.js";import{P as C}from"./PrimaryButton-Dmln_z9C.js";import{S as ee}from"./SecondaryButton-DEQ0GUFj.js";import{T as se}from"./Textarea2-DWfO9Hdd.js";import"./Footer-Bc1XkYwF.js";import{B as ae}from"./BackButton-Dguvam4A.js";import"./Dropdown-CMXUyYL3.js";import"./transition-D2aQqEaI.js";import"./InputLabel-TKlKzBkH.js";import"./TextInput-Dk9zkqAb.js";import"./InputError-BugI7SpX.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./dialog-CeFeWAN5.js";function _e({auth:k,jugadores:w,idPartido:x,resultados:S,partidoInfo:l}){const[R,j]=t.useState(!1),[E,u]=t.useState(""),[h,T]=t.useState(""),[q,M]=t.useState(1),P=t.useRef(),B=t.useRef(),$=t.useRef(),F=t.useRef(),O=t.useRef(),f={fk_programaciones_faces_id:x[0].id,fk_jugador_id:"",goles:"",tarjetas_amarillas:"",tarjetas_rojas:"",observaciones:""},{data:o,setData:d,errors:i,delete:A,post:G,put:L,processing:g}=U(f),n=s=>{const{name:a,value:r}=s.target;d(m=>({...m,[a]:r}))},b=(s,a,r,m,W,K,Q)=>{j(!0),M(s),s===1?(u("Nuevo Resultado"),d(f)):(u("Editar Resultado"),d({id:a,fk_programaciones_faces_id:x[0].id,fk_jugador_id:r,goles:m,tarjetas_amarillas:W,tarjetas_rojas:K,observaciones:Q}))},c=()=>{j(!1)},D=s=>{s.preventDefault(),q===1?G(route("resultadosPartidos.store"),{preserveScroll:!0,onSuccess:()=>{v("Resultado creado correctamente")}}):L(route("resultadosPartidos.update",o.id),{preserveScroll:!0,onSuccess:()=>{v("Resultado actualizado correctamente")}})},v=s=>{c(),_.fire("¡Correcto!",s,"success")},H=s=>{_.fire({title:"¿Estás seguro?",text:"No podrás revertir esto",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&A(route("resultadosPartidos.destroy",s))})},J=[{value:"",label:"Seleccione ..."},...w.filter(s=>s.estado===1).map(s=>({value:s.id,label:`${s.nombreCompleto} - ${s.nombreEquipo}`}))],V=s=>{T(s.target.value)},z=S.reduce((s,a)=>{const r=`${a.fk_jugador_id}-${a.nombreEquipo}`;return s[r]||(s[r]={...a,goles:0,tarjetas_amarillas:0,tarjetas_rojas:0}),s[r].goles+=a.goles,s[r].tarjetas_amarillas+=a.tarjetas_amarillas,s[r].tarjetas_rojas+=a.tarjetas_rojas,s},{}),y=Object.values(z),N=y.filter(s=>s.nombreCompleto.toLowerCase().includes(h.toLowerCase())),I=y.reduce((s,a)=>(s[a.nombreEquipo]||(s[a.nombreEquipo]=0),s[a.nombreEquipo]+=a.goles,s),{});return e.jsx(X,{user:k.user,children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-1 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:`Partido: ${l.equipoLocal} vs ${l.equipoVisitante}`}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{children:`Fecha: ${l.FechaPartido}`}),e.jsx("div",{children:`Hora: ${l.HoraPartido}`}),e.jsx("div",{children:`Lugar: ${l.nomLugar}`})]}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:V,className:"px-4 py-2 border rounded"}),e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(C,{onClick:()=>b(1),children:[e.jsx("i",{className:"fa-solid fa-plus-circle"}),"Nuevo Resultado"]}),e.jsx(ae,{to:route("dashboard")})]})]}),e.jsx("div",{className:"grid py-6 bg-white v-screen place-items-center",children:e.jsxs("table",{className:"w-full border-gray-400 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"Equipo"}),e.jsx("th",{className:"px-4 py-2 border",children:"Jugador"}),e.jsx("th",{className:"px-4 py-2 border",children:"Goles"}),e.jsx("th",{className:"px-4 py-2 border",children:"Tarjetas Amarillas"}),e.jsx("th",{className:"px-4 py-2 border",children:"Tarjetas Rojas"}),e.jsx("th",{className:"px-4 py-2 border",children:"Observaciones"}),e.jsx("th",{className:"px-4 py-2 border",children:"Editar"}),e.jsx("th",{className:"px-4 py-2 border",children:"Eliminar"})]})}),e.jsx("tbody",{children:N.length>0?N.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border",children:s.nombreEquipo}),e.jsx("td",{className:"px-4 py-2 border",children:s.nombreCompleto}),e.jsx("td",{className:"px-4 py-2 border",children:s.goles}),e.jsx("td",{className:"px-4 py-2 border",children:s.tarjetas_amarillas}),e.jsx("td",{className:"px-4 py-2 border",children:s.tarjetas_rojas}),e.jsx("td",{className:"px-4 py-2 border",children:s.observaciones}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200 focus:ring-4 focus:outline-none focus:ring-red-100",onClick:()=>b(2,s.id,s.fk_jugador_id,s.goles,s.tarjetas_amarillas,s.tarjetas_rojas,s.observaciones),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",onClick:()=>H(s.id),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-4 py-2 text-center border",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"grid py-6 bg-white v-screen place-items-center",children:e.jsxs("table",{className:"w-full border-gray-400 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"Equipo"}),e.jsx("th",{className:"px-4 py-2 border",children:"Total de Goles"})]})}),e.jsx("tbody",{children:Object.entries(I).map(([s,a])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border",children:s}),e.jsx("td",{className:"px-4 py-2 border",children:a>0?a:"0 (Ningún gol anotado)"})]},s))})]})})]}),e.jsxs(Z,{show:R,onClose:c,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:E}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[e.jsx("input",{type:"text",value:o.fk_programaciones_faces_id,name:"fk_programaciones_faces_id",readOnly:!0,hidden:!0}),e.jsx(Y,{label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Jugador"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_jugador_id",ref:P,name:"fk_jugador_id",value:o.fk_jugador_id,onChange:n,errorMessage:i.fk_jugador_id,options:J}),e.jsx(p,{label:"Goles",id:"goles",type:"number",name:"goles",ref:B,placeholder:"Goles",value:o.goles,onChange:n,errorMessage:i.goles}),e.jsx(p,{label:"Tarjetas Amarillas",id:"tarjetas_amarillas",type:"number",name:"tarjetas_amarillas",ref:$,placeholder:"Tarjetas Amarillas",value:o.tarjetas_amarillas,onChange:n,errorMessage:i.tarjetas_amarillas}),e.jsx(p,{label:"Tarjetas Rojas",id:"tarjetas_rojas",type:"number",name:"tarjetas_rojas",ref:F,placeholder:"Tarjetas Rojas",value:o.tarjetas_rojas,onChange:n,errorMessage:i.tarjetas_rojas}),e.jsx(se,{label:"Observaciones",type:"text",ref:O,name:"observaciones",value:o.observaciones,onChange:n,errorMessage:i.observaciones}),e.jsx("div",{className:"mt-6",children:e.jsx(C,{processing:g?"true":"false",className:"mt-2",children:e.jsx("i",{className:"fa-solid fa-save",children:g?" Procesando...":" Guardar"})})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(ee,{onClick:c,children:"Cancelar"})})]})]})]})})})}export{_e as default};
