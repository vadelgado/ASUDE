import{r as t,W,j as e,Y as _}from"./app-BhjNjcCm.js";import{S as m}from"./sweetalert2.all-3HTqazCg.js";import{A as $}from"./AuthenticatedLayout-BXK5D25c.js";import{D as H}from"./DangerButton-oDIYcyeE.js";import{F as L}from"./FormField-hn8KU2Ng.js";import{M as X,S as z}from"./SecondaryButton-BWNFJXMz.js";import{P as b}from"./PrimaryButton-Cu2oAhor.js";import{W as G}from"./WarningButton-BU_pJwM0.js";import{X as V}from"./index.es-DrUFf5_Y.js";import{F as Y}from"./Footer-DMNqL7eO.js";import"./transition-Cz6CqnBm.js";import"./Logo-CNCYK2dG.js";import"./InputLabel-BbAJHDGo.js";import"./TextInput-CZHJpNTP.js";import"./InputError-Ccxb4UDy.js";import"./dialog-BbkRAQz0.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";function ue({auth:j,fases:F,torneo:o,fk_torneo:d}){const[N,u]=t.useState(!1),[y,f]=t.useState(""),[v,S]=t.useState(1),[x,w]=t.useState(""),C=t.useRef(),p={nombreFase:"",fk_torneo:d},{data:n,setData:i,errors:T,delete:B,post:E,put:P,processing:h}=W(p),M=s=>{const{name:a,value:r}=s.target;i(O=>({...O,[a]:r}))},g=(s,a,r)=>{u(!0),S(s),s===1?(f("Agregar Fase"),i(p)):(f("Editar Fase"),i({id:a,nombreFase:r,fk_torneo:d}))},l=()=>{u(!1)},A=s=>{s.preventDefault(),v===1?E(route("fases.store"),{preserveScroll:!0,onSuccess:()=>{c("Fase guardada.")}}):P(route("fases.update",n.id),{preserveScroll:!0,onSuccess:()=>{c("Fase actualizada")}})},c=s=>{l(),m.fire({title:s,icon:"success"})},D=(s,a)=>{m.fire({title:`¿Estás seguro de eliminar ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&B(route("fases.destroy",s),{onSuccess:()=>{c("Fase eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la fase.",icon:"error"})}})})},R=[{name:"#",selector:(s,a)=>a+1,sortable:!0},{name:"Nombre Fase",selector:s=>s.nombreFase,sortable:!0},{name:"Editar",cell:s=>e.jsx(G,{onClick:()=>g(2,s.id,s.nombreFase),children:e.jsx("i",{className:"fa-solid fa-pencil"})})},{name:"Eliminar",cell:s=>e.jsx(H,{onClick:()=>D(s.id,s.nombreFase),children:e.jsx("i",{className:"fa-solid fa-trash"})})},{name:"Partidos",cell:s=>e.jsx("a",{className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-gray-800 rounded-lg hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-300",href:`/programacionesFaces?fase_id=${s.id}`,children:e.jsx("i",{className:"mr-2 fa-regular fa-futbol",children:" Partidos"})})},{name:"Fotos",cell:s=>e.jsx("a",{className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-gray-800 rounded-lg hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-300",href:`/gallery?fase_id=${s.id}`,children:e.jsx("i",{className:"mr-2 fa-regular fa-image",children:" Fotos"})})}],k=F.filter(s=>s.nombreFase.toLowerCase().includes(x.toLowerCase())),I={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs($,{user:j.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fases para el torneo ",o[0].nombreTorneo," del ",o[0].fechaInicio," al ",o[0].fechaFin]}),children:[e.jsx(_,{title:"Fases Partidos"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 mt-32",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(b,{onClick:()=>g(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Fase"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre",value:x,onChange:s=>w(s.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(V,{title:"Fases",columns:R,data:k,pagination:!0,highlightOnHover:!0,paginationComponentOptions:I,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay fases Registradas"})})})]}),e.jsxs(X,{show:N,onClose:l,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:y}),e.jsxs("form",{onSubmit:A,className:"p-6",children:[e.jsx("input",{type:"text",value:n.fk_torneo,name:"fk_torneo",readOnly:!0,className:"hidden"}),e.jsx(L,{htmlFor:"nombreFase",label:"Nombre",id:"nombreFase",type:"text",name:"nombreFase",ref:C,placeholder:"Nombre de la Fase",value:n.nombreFase,onChange:M,errorMessage:T.nombreFase}),e.jsx("div",{className:"mt-6",children:e.jsxs(b,{processing:h?"true":"false",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),h?"Procesando...":"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(z,{onClick:l,children:"Cancelar"})})]})]})]})}),e.jsx(Y,{})]})}export{ue as default};
