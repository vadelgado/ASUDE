import{r as s,W as G,j as e,Y as L}from"./app-BhjNjcCm.js";import{X}from"./index.es-DrUFf5_Y.js";import{A as z}from"./AuthenticatedLayout-BXK5D25c.js";import{P as S}from"./PrimaryButton-Cu2oAhor.js";import{W as H}from"./WarningButton-BU_pJwM0.js";import{D as Y}from"./DangerButton-oDIYcyeE.js";import{M as J,S as K}from"./SecondaryButton-BWNFJXMz.js";import{S as d}from"./sweetalert2.all-3HTqazCg.js";import{S as b}from"./SelectField-pExDwwhD.js";import{F as Q}from"./Footer-DMNqL7eO.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-Cz6CqnBm.js";import"./Logo-CNCYK2dG.js";import"./dialog-BbkRAQz0.js";import"./InputLabel-BbAJHDGo.js";import"./InputError-Ccxb4UDy.js";function he({auth:v,resultadoSorteos:k,equipos:N,cantidadEquiposParticipantes:q,torneo_id:i}){const[y,m]=s.useState(!1),[E,p]=s.useState(""),[C,_]=s.useState(1),[f,R]=s.useState(""),w=s.useRef(),l=s.useRef(),{data:n,setData:c,delete:F,post:P,put:T,processing:B,reset:U,errors:x}=G({id:"",puesto:"",fk_equipo:"",fk_torneo:i}),h=t=>{const{name:o,value:a}=t.target;c(u=>({...u,[o]:a}))},g=(t,o,a,u,V)=>{m(!0),_(t),t===1?(p("Agregar Resultado Sorteo"),c({id:"",puesto:"",fk_equipo:"",fk_torneo:i})):(p("Editar Resultado Sorteo"),c({id:o,puesto:a,fk_equipo:u,fk_torneo:i}))},r=()=>{m(!1)},I=t=>{t.preventDefault(),C===1?P(route("resultadoSorteo.store"),{onSuccess:()=>{r(),d.fire({title:"Resultado Sorteo agregado correctamente",icon:"success"})},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}}):T(route("resultadoSorteo.update",n.id),{onSuccess:()=>{r(),j("Resultado Sorteo actualizado correctamente")},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}})},j=t=>{r(),d.fire({title:t,icon:"success"})},A=t=>{d.mixin({buttonsStyling:!0}).fire({title:"¿Estás seguro?",text:"No podrás revertir esto!",icon:"question",showCancelButton:!0,confirmButtonText:'<i className="fa-solid fa-check"></i> Si, eliminarlo!',cancelButtonText:'<i className="fa-solid fa-ban"></i> Cancelar!'}).then(a=>{a.isConfirmed&&F(route("resultadoSorteo.destroy",t),{onSuccess:()=>{j("Resultado Sorteo eliminado correctamente")}})})},M=[{value:"",label:"Seleccione ..."},...Array.from({length:q},(t,o)=>({value:o+1,label:`Equipo ${o+1}`}))],D=[{value:"",label:"Seleccione ..."},...N.map(t=>({value:t.id,label:t.nombreEquipo}))],O=[{name:"Grupo y Posición",selector:t=>t.puesto,sortable:!0},{name:"Equipo",selector:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/${t.escudoEquipo}`,onError:o=>{o.target.onerror=null,o.target.src="/escudo.svg",o.target.style.filter="brightness(0.5)"},alt:`Foto de ${t.nombreEquipo}`,className:"w-10 h-10 mr-2 rounded-full"}),t.nombreEquipo]}),sortable:!0},{name:"Editar",cell:t=>e.jsx(H,{onClick:()=>g(2,t.id,t.puesto,t.fk_equipo,t.fk_torneo),children:e.jsx("i",{className:"fa-solid fa-edit"})})},{name:"Eliminar",cell:t=>e.jsx(Y,{onClick:()=>A(t.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})}],W=k.filter(t=>t.nombreEquipo.toLowerCase().includes(f.toLowerCase())),$={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(z,{user:v.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"✋Sorteo"}),children:[e.jsx(L,{title:"✋Sorteo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 mt-32",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsxs(S,{onClick:()=>g(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"})," Añadir"]})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre de equipo...",value:f,onChange:t=>R(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(X,{columns:O,data:W,pagination:!0,paginationComponentOptions:$,highlightOnHover:!0,responsive:!0,noDataComponent:"No hay resultados. 👀"})})]}),e.jsxs(J,{show:y,onClose:r,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:E}),e.jsxs("form",{onSubmit:I,className:"p-6",children:[e.jsx("input",{type:"text",value:n.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx(b,{htmlFor:"puesto",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Puesto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"puesto",ref:w,name:"puesto",value:n.puesto,onChange:h,options:M,errorMessage:x.puesto}),e.jsx(b,{htmlFor:"fk_equipo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Equipo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_equipo",ref:l,name:"fk_equipo",value:n.fk_equipo,onChange:h,options:D,errorMessage:x.fk_equipo}),e.jsx("div",{className:"mt-6",children:e.jsxs(S,{processing:B?"true":"false",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(K,{onClick:r,children:"Cancelar"})})]})]})]})}),e.jsx(Q,{})]})}export{he as default};
