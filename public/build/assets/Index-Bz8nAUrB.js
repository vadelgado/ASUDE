import{r as a,W as H,j as e,Y as T}from"./app-Cd7KucXb.js";import{S as m}from"./sweetalert2.all-D1jq6Uzp.js";import{X as W}from"./index.es-CONMRwCR.js";import{A as G}from"./AuthenticatedLayout-CbbYANlG.js";import{D as L}from"./DangerButton-DYhnz9jb.js";import{F as y}from"./FormField-Dp_8a1tY.js";import{I as X}from"./ImgField-BfIDLDAP.js";import{M as $,S as z}from"./SecondaryButton-D7m-MCk_.js";import{P as N}from"./PrimaryButton-DbbhdSuN.js";import{W as V}from"./WarningButton-BvAH9I19.js";import{F as Y}from"./Footer-diGZ6D8K.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-FqHLaE6G.js";import"./Logo-CCmd4JRq.js";import"./InputLabel-lXMCEUIO.js";import"./TextInput-BvBV1DpO.js";import"./InputError-B_B5ZySv.js";import"./dialog-j6PSrzX6.js";function xe({auth:b,galleries:v,fase:h}){const[w,u]=a.useState(!1),[C,g]=a.useState(""),[S,U]=a.useState(1),A=a.useRef(),k=a.useRef(),M=a.useRef(),x={largeUrl:null,width:"",height:"",fk_fase:h[0].id},{data:r,setData:l,errors:o,delete:B,post:p,put:q,processing:f}=H(x),j=t=>{const{name:s,value:c}=t.target;l(d=>({...d,[s]:c}))},E=t=>{l("largeUrl",t.target.files[0])},F=(t,s,c,d,P,_)=>{u(!0),U(t),t===1?(g("Agregar Foto Fase"),l(x)):(g("Editar Foto Fase"),l({id:s,largeUrl:c,width:d,height:P,fk_fase:_}))},i=()=>{u(!1)},I=t=>{t.preventDefault(),S===1?p(route("gallery.store"),{preserveScroll:!0,onSuccess:()=>{n("Foto Guardada.")}}):p(route("gallery.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{n("Foto Actualizada.")}})},n=t=>{i(),m.fire({title:t,icon:"success"})},R=t=>{m.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(s=>{s.isConfirmed&&B(route("gallery.destroy",t),{onSuccess:()=>{n("Foto Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la foto.",icon:"error"})}})})},D=[{name:"#",selector:(t,s)=>s+1,sortable:!0},{name:"Foto",selector:t=>t.largeUrl,cell:t=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:`/storage/${t.largeUrl}`,alt:t.largeUrl,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Ancho",selector:t=>t.width,sortable:!0},{name:"Alto",selector:t=>t.height,sortable:!0},{name:"Acciones",cell:t=>e.jsxs(e.Fragment,{children:[e.jsx(V,{onClick:()=>F(2,t.id,t.largeUrl,t.width,t.height,t.fk_fase),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),e.jsx(L,{onClick:()=>R(t.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],O={rows:{style:{minHeight:"72px"}},headCells:{style:{paddingLeft:"8px",paddingRight:"8px"}},cells:{style:{paddingLeft:"8px",paddingRight:"8px"}}};return e.jsxs(G,{user:b.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fotos de la fase ",h[0].nombreFase]}),children:[e.jsx(T,{title:"Fotos Fase"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 mt-32",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsxs(N,{onClick:()=>F(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Agregar Foto"]})}),e.jsx(W,{columns:D,data:v,customStyles:O,pagination:!0,highlightOnHover:!0,responsive:!0,striped:!0,fixedHeader:!0,noDataComponent:e.jsxs("div",{children:["No hay Fotos Para Mostrar."," "]})})]}),e.jsxs($,{show:w,onClose:i,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:C}),e.jsxs("form",{onSubmit:I,className:"p-6",children:[e.jsx("input",{type:"text",value:r.fk_fase,name:"fk_fase",hidden:!0,readOnly:!0}),e.jsx(X,{htmlFor:"largeUrl",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Foto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"largeUrl",name:"largeUrl",ref:A,onChange:E,value:r.largeUrl,errorMessage:o.largeUrl,imageUrl:r.largeUrl?`http://127.0.0.1:8000/storage/${r.largeUrl}`:null}),e.jsx(y,{htmlFor:"width",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ancho"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"width",type:"number",name:"width",ref:k,placeholder:"Ancho",value:r.width,onChange:j,errorMessage:o.width}),e.jsx(y,{htmlFor:"height",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Alto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"height",type:"number",name:"height",ref:M,placeholder:"Alto",value:r.height,onChange:j,errorMessage:o.height}),e.jsx("div",{className:"mt-6",children:e.jsxs(N,{processing:f?"true":"false",className:"mt-2",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),f?"Procesando...":"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(z,{onClick:i,children:"Cancelar"})})]})]})]})}),e.jsx(Y,{})]})}export{xe as default};
