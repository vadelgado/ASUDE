import{r as s,W as L,j as e,Y as X}from"./app-BZ4MfUuB.js";import{X as z}from"./index.es-BXVEGKkN.js";import{A as H}from"./AuthenticatedLayout-B_aZUwGG.js";import{P as W}from"./PrimaryButton-DeKf7L6r.js";import{M as Y}from"./Modal-Cm66vSOL.js";import{S as d}from"./sweetalert2.all-Cpt_h8z6.js";import{S as b}from"./SelectField-DeTgE9my.js";import"./Footer-DKROTaFs.js";import{J as K}from"./index-D-wg37eW.js";import{B as Q}from"./BackButton-DgGLzLNM.js";import{G as U,C as V}from"./CancelarButton-CEeyGg3x.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./Dropdown-DxAQ1H4x.js";import"./transition-ujbCdl0s.js";import"./dialog-Bfofd0zF.js";import"./InputLabel-C_OL7V6n.js";import"./InputError-Bz0s8zW6.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";function Se({auth:v,resultadoSorteos:S,equipos:y,cantidadEquiposParticipantes:N,torneo_id:i}){const[k,m]=s.useState(!1),[C,p]=s.useState(""),[q,w]=s.useState(1),[f,E]=s.useState(""),_=s.useRef(),l=s.useRef(),{data:n,setData:c,delete:R,post:B,put:P,processing:T,reset:Z,errors:x}=L({id:"",puesto:"",fk_equipo:"",fk_torneo:i}),g=t=>{const{name:o,value:a}=t.target;c(u=>({...u,[o]:a}))},I=new K,A=()=>{I.addConfetti({emojis:["⚽","🎊","🏆","🥇","🎇","🎉","🎈","🎂","🍾","🍻","🥳","🙌","👏","🎵","🔥","💥","🎤","🕺","💃","🎶"]})},h=(t,o,a,u,ee)=>{m(!0),w(t),t===1?(p("Agregar Resultado Sorteo"),c({id:"",puesto:"",fk_equipo:"",fk_torneo:i})):(p("Editar Resultado Sorteo"),c({id:o,puesto:a,fk_equipo:u,fk_torneo:i}))},r=()=>{m(!1)},F=t=>{t.preventDefault(),q===1?B(route("resultadoSorteo.store"),{onSuccess:()=>{r(),A(),d.fire({title:"Resultado Sorteo agregado correctamente",icon:"success"})},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}}):P(route("resultadoSorteo.update",n.id),{onSuccess:()=>{r(),j("Resultado Sorteo actualizado correctamente")},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}})},j=t=>{r(),d.fire({title:t,icon:"success"})},M=t=>{d.mixin({buttonsStyling:!0}).fire({title:"¿Estás seguro?",text:"No podrás revertir esto!",icon:"question",showCancelButton:!0,confirmButtonText:'<i className="fa-solid fa-check"></i> Si, eliminarlo!',cancelButtonText:'<i className="fa-solid fa-ban"></i> Cancelar!'}).then(a=>{a.isConfirmed&&R(route("resultadoSorteo.destroy",t),{onSuccess:()=>{j("Resultado Sorteo eliminado correctamente")}})})},G=[{value:"",label:"Seleccione ..."},...Array.from({length:N},(t,o)=>({value:o+1,label:`Equipo ${o+1}`}))],O=[{value:"",label:"Seleccione ..."},...y.map(t=>({value:t.id,label:t.nombreEquipo}))],D=[{name:"Grupo y Posición",selector:t=>t.puesto,sortable:!0},{name:"Equipo",selector:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/${t.escudoEquipo}`,onError:o=>{o.target.onerror=null,o.target.src="/escudo.svg",o.target.style.filter="brightness(0.5)"},alt:`Foto de ${t.nombreEquipo}`,className:"w-10 h-10 mr-2 rounded-full"}),t.nombreEquipo]}),sortable:!0},{name:"Editar",cell:t=>e.jsx("button",{onClick:()=>h(2,t.id,t.puesto,t.fk_equipo,t.fk_torneo),className:"mt-2 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})},{name:"Eliminar",cell:t=>e.jsx("button",{onClick:()=>M(t.id),className:"mt-2 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})}],J=S.filter(t=>t.nombreEquipo.toLowerCase().includes(f.toLowerCase())),$={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(H,{user:v.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"✋Sorteo"}),children:[e.jsx(X,{title:"✋Sorteo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsx("div",{className:"min-h-screen py-6 bg-gray-100",children:e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(W,{onClick:()=>h(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"})," ","Añadir"]}),e.jsx(Q,{to:route("torneo.index")})]}),e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Resultados Sorteos"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre de equipo...",value:f,onChange:t=>E(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(z,{columns:D,data:J,pagination:!0,paginationComponentOptions:$,highlightOnHover:!0,responsive:!0,noDataComponent:"No hay resultados. 👀"})})]})}),e.jsxs(Y,{show:k,onClose:r,children:[e.jsx("h2",{className:" p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:C}),e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsx("input",{type:"text",value:n.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx(b,{htmlFor:"fk_equipo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Equipo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_equipo",ref:l,name:"fk_equipo",value:n.fk_equipo,onChange:g,options:O,errorMessage:x.fk_equipo}),e.jsx(b,{htmlFor:"puesto",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Puesto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"puesto",ref:_,name:"puesto",value:n.puesto,onChange:g,options:G,errorMessage:x.puesto}),e.jsxs("div",{className:"flex justify-between mt-36",children:[e.jsx(U,{processing:T.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(V,{onClick:r,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{Se as default};
