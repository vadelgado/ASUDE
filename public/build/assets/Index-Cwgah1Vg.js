import{r,W as V,j as e,Y as X}from"./app-B7R3xKfR.js";import{S as g}from"./sweetalert2.all-BCuXndMg.js";import{X as $}from"./index.es-BrFSQNI4.js";import{A as H}from"./AuthenticatedLayout-Y2T7n90j.js";import{F as p}from"./FormField-DdU7T2BP.js";import{I as U}from"./ImgField-Pj38IbQw.js";import{M as W}from"./Modal-CxfqK7zO.js";import{P as Y}from"./PrimaryButton-Dmln_z9C.js";import"./Footer-Bc1XkYwF.js";import{B as q}from"./BackButton-Dguvam4A.js";import{G as J,C as K}from"./CancelarButton-CSosB64a.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./Dropdown-CMXUyYL3.js";import"./transition-D2aQqEaI.js";import"./InputLabel-TKlKzBkH.js";import"./TextInput-Dk9zkqAb.js";import"./InputError-BugI7SpX.js";import"./dialog-CeFeWAN5.js";function je({auth:L,lugarPartidos:v,torneo:a}){const[N,f]=r.useState(!1),[y,x]=r.useState(""),[C,w]=r.useState(1),[h,k]=r.useState(""),S=r.useRef(),z=r.useRef(),F=r.useRef(),P=r.useRef(),I={nomLugar:"",geolocalizacion:"",direccion:"",fotoLugar:null,fk_torneo:a[0].id},{data:i,setData:n,errors:l,delete:R,post:j,processing:T}=V(I),c=o=>{const{name:t,value:s}=o.target;n(m=>({...m,[t]:s}))},B=o=>{n("fotoLugar",o.target.files[0])},b=(o,t,s,m,A,O,Q)=>{f(!0),w(o),o===1?(x("Agregar Lugar Partido"),n({nomLugar:"",geolocalizacion:"",direccion:"",fotoLugar:null,fk_torneo:a[0].id})):(x("Editar Lugar Partido"),n({id:t,nomLugar:s,geolocalizacion:m,direccion:A,fotoLugar:O,fk_torneo:a[0].id}))},u=()=>{f(!1)},M=o=>{o.preventDefault(),C===1?j(route("lugarPartido.store"),{preserveScroll:!0,onSuccess:()=>{d("Lugar partido guardado.")}}):j(route("lugarPartido.updatepost",i.id),{preserveScroll:!0,onSuccess:()=>{d("Lugar partido actualizado.")}})},d=o=>{u(),g.fire({title:o,icon:"success"})},D=(o,t)=>{g.fire({title:`¿Estás seguro de eliminar ${t}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(s=>{s.isConfirmed&&R(route("lugarPartido.destroy",o),{onSuccess:()=>{d("Lugar partido eliminado.")},onError:()=>{g.fire({title:"Error",text:"No se pudo eliminar el lugar partido.",icon:"error"})}})})},E=[{name:"#",selector:(o,t)=>t+1,sortable:!0},{name:"Nombre",selector:o=>o.nomLugar,sortable:!0},{name:"Geolocalización",cell:o=>e.jsx("a",{href:o.geolocalizacion,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Ver en Google Maps"}),sortable:!0},{name:"Dirección",selector:o=>o.direccion,sortable:!0},{name:"Foto lugar",cell:o=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${o.fotoLugar}`,alt:o.nomLugar,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Editar",cell:o=>e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100 mt-2",onClick:()=>b(2,o.id,o.nomLugar,o.geolocalizacion,o.direccion,o.fotoLugar,o.fk_torneo),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})}),ignoreRowClick:!0},{name:"Eliminar",cell:o=>e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",onClick:()=>D(o.id,o.nomLugar),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})}),ignoreRowClick:!0}],G=v.filter(o=>o.nomLugar.toLowerCase().includes(h.toLowerCase())),_={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(H,{user:L.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Lugares Partidos para el torneo ",a[0].nombreTorneo," del"," ",a[0].fechaInicio," al ",a[0].fechaFin]}),children:[e.jsx(X,{title:"Lugar Partido"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Lista de Lugares"}),e.jsxs("div",{className:"flex justify-end mt-2 mb-3",children:[e.jsxs(Y,{onClick:()=>b(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"})," ","Añadir Lugar"]}),e.jsx(q,{to:"/preTorneos"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre",value:h,onChange:o=>k(o.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx($,{title:"Lugares Partidos",columns:E,data:G,pagination:!0,paginationComponentOptions:_,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay lugares Registrados"})})})]}),e.jsxs(W,{show:N,onClose:u,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:y}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[e.jsx("input",{type:"text",value:i.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx(p,{htmlFor:"nomLugar",label:"Nombre",id:"nomLugar",type:"text",name:"nomLugar",ref:S,placeholder:"Nombre del lugar",value:i.nomLugar,onChange:c,errorMessage:l.nomLugar}),e.jsx(p,{htmlFor:"geolocalizacion",label:"Geolocalización",id:"geolocalizacion",type:"text",name:"geolocalizacion",ref:z,placeholder:"Geolocalización",value:i.geolocalizacion,onChange:c,errorMessage:l.geolocalizacion}),e.jsx(p,{htmlFor:"direccion",label:"Dirección",id:"direccion",type:"text",name:"direccion",ref:F,placeholder:"Dirección",value:i.direccion,onChange:c,errorMessage:l.direccion}),e.jsx(U,{htmlFor:"fotoLugar",label:"Foto Lugar",id:"fotoLugar",name:"fotoLugar",imageUrl:i.fotoLugar,ref:P,onChange:B,errorMessage:l.fotoLugar}),e.jsxs("div",{className:"flex justify-between col-span-2 mt-1",children:[e.jsx(J,{processing:T.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(K,{onClick:u,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{je as default};
