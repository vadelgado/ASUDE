import{r as s,W as L,j as e,Y as X}from"./app-DDWAxr0O.js";import{X as z}from"./index.es-DjzJ3YbP.js";import{A as H}from"./AuthenticatedLayout-25vPjUJU.js";import{P as S}from"./PrimaryButton-DeQ-lA9j.js";import{W as Y}from"./WarningButton-CFaWasVy.js";import{D as K}from"./DangerButton-ZZR714Xu.js";import{M as Q,S as U}from"./SecondaryButton-nHkmApVW.js";import{S as d}from"./sweetalert2.all-z0A-IzJY.js";import{S as b}from"./SelectField-_h3w3KYV.js";import{F as V}from"./Footer-D9OzLELn.js";import{J as Z}from"./index-D-wg37eW.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./transition-DFnG931F.js";import"./Logo-DrEgFXuP.js";import"./dialog-BF5Oivp2.js";import"./InputLabel-ChKXdU0T.js";import"./InputError-tTg0-KzI.js";function be({auth:k,resultadoSorteos:v,equipos:N,cantidadEquiposParticipantes:C,torneo_id:i}){const[q,m]=s.useState(!1),[y,p]=s.useState(""),[E,_]=s.useState(1),[f,R]=s.useState(""),w=s.useRef(),l=s.useRef(),{data:n,setData:c,delete:F,post:P,put:T,processing:B,reset:ee,errors:x}=L({id:"",puesto:"",fk_equipo:"",fk_torneo:i}),h=t=>{const{name:o,value:a}=t.target;c(u=>({...u,[o]:a}))},I=new Z,A=()=>{I.addConfetti({emojis:["⚽","🎊","🏆","🥇","🎇","🎉","🎈","🎂","🍾","🍻","🥳","🙌","👏","🎵","🔥","💥","🎤","🕺","💃","🎶"]})},g=(t,o,a,u,te)=>{m(!0),_(t),t===1?(p("Agregar Resultado Sorteo"),c({id:"",puesto:"",fk_equipo:"",fk_torneo:i})):(p("Editar Resultado Sorteo"),c({id:o,puesto:a,fk_equipo:u,fk_torneo:i}))},r=()=>{m(!1)},M=t=>{t.preventDefault(),E===1?P(route("resultadoSorteo.store"),{onSuccess:()=>{r(),d.fire({title:"Resultado Sorteo agregado correctamente",icon:"success"})},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}}):T(route("resultadoSorteo.update",n.id),{onSuccess:()=>{r(),j("Resultado Sorteo actualizado correctamente")},onError:o=>{o.grupo?grupoPosicionInput.current.focus():o.fk_equipo&&l.current.focus()}})},j=t=>{r(),d.fire({title:t,icon:"success"})},D=t=>{d.mixin({buttonsStyling:!0}).fire({title:"¿Estás seguro?",text:"No podrás revertir esto!",icon:"question",showCancelButton:!0,confirmButtonText:'<i className="fa-solid fa-check"></i> Si, eliminarlo!',cancelButtonText:'<i className="fa-solid fa-ban"></i> Cancelar!'}).then(a=>{a.isConfirmed&&F(route("resultadoSorteo.destroy",t),{onSuccess:()=>{j("Resultado Sorteo eliminado correctamente")}})})},O=[{value:"",label:"Seleccione ..."},...Array.from({length:C},(t,o)=>({value:o+1,label:`Equipo ${o+1}`}))],J=[{value:"",label:"Seleccione ..."},...N.map(t=>({value:t.id,label:t.nombreEquipo}))],W=[{name:"Grupo y Posición",selector:t=>t.puesto,sortable:!0},{name:"Equipo",selector:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/${t.escudoEquipo}`,onError:o=>{o.target.onerror=null,o.target.src="/escudo.svg",o.target.style.filter="brightness(0.5)"},alt:`Foto de ${t.nombreEquipo}`,className:"w-10 h-10 mr-2 rounded-full"}),t.nombreEquipo]}),sortable:!0},{name:"Editar",cell:t=>e.jsx(Y,{onClick:()=>g(2,t.id,t.puesto,t.fk_equipo,t.fk_torneo),children:e.jsx("i",{className:"fa-solid fa-edit"})})},{name:"Eliminar",cell:t=>e.jsx(K,{onClick:()=>D(t.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})}],$=v.filter(t=>t.nombreEquipo.toLowerCase().includes(f.toLowerCase())),G={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(H,{user:k.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"✋Sorteo"}),children:[e.jsx(X,{title:"✋Sorteo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto mt-32",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsxs(S,{onClick:()=>g(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"})," ","Añadir"]})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre de equipo...",value:f,onChange:t=>R(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(z,{columns:W,data:$,pagination:!0,paginationComponentOptions:G,highlightOnHover:!0,responsive:!0,noDataComponent:"No hay resultados. 👀"})})]}),e.jsxs(Q,{show:q,onClose:r,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:y}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[e.jsx("input",{type:"text",value:n.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx(b,{htmlFor:"puesto",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Puesto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"puesto",ref:w,name:"puesto",value:n.puesto,onChange:h,options:O,errorMessage:x.puesto}),e.jsx(b,{htmlFor:"fk_equipo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Equipo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_equipo",ref:l,name:"fk_equipo",value:n.fk_equipo,onChange:h,options:J,errorMessage:x.fk_equipo}),e.jsx("div",{className:"mt-6",children:e.jsxs(S,{onClick:A,processing:B?"true":"false",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(U,{onClick:r,children:"Cancelar"})})]})]})]})}),e.jsx(V,{})]})}export{be as default};
