import{r as s,W as O,j as e,Y as G}from"./app-BZ4MfUuB.js";import{S as d}from"./sweetalert2.all-Cpt_h8z6.js";import{A as _}from"./AuthenticatedLayout-B_aZUwGG.js";import{F as $}from"./FormField-fnXDQpb5.js";import{M as H}from"./Modal-Cm66vSOL.js";import{P as L}from"./PrimaryButton-DeKf7L6r.js";import{X}from"./index.es-BXVEGKkN.js";import"./Footer-DKROTaFs.js";import{B as z}from"./BackButton-DgGLzLNM.js";import{G as V,C as W}from"./CancelarButton-CEeyGg3x.js";import"./Dropdown-DxAQ1H4x.js";import"./transition-ujbCdl0s.js";import"./InputLabel-C_OL7V6n.js";import"./TextInput-D68xSFFS.js";import"./InputError-Bz0s8zW6.js";import"./dialog-Bfofd0zF.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";function me({auth:h,fases:b,torneo:o,fk_torneo:m}){const[v,u]=s.useState(!1),[j,f]=s.useState(""),[y,N]=s.useState(1),[p,F]=s.useState(""),w=s.useRef(),x={nombreFase:"",fk_torneo:m},{data:n,setData:i,errors:C,delete:S,post:k,put:B,processing:T}=O(x),E=t=>{const{name:a,value:r}=t.target;i(D=>({...D,[a]:r}))},g=(t,a,r)=>{u(!0),N(t),t===1?(f("Agregar Fase"),i(x)):(f("Editar Fase"),i({id:a,nombreFase:r,fk_torneo:m}))},l=()=>{u(!1)},M=t=>{t.preventDefault(),y===1?k(route("fases.store"),{preserveScroll:!0,onSuccess:()=>{c("Fase guardada.")}}):B(route("fases.update",n.id),{preserveScroll:!0,onSuccess:()=>{c("Fase actualizada")}})},c=t=>{l(),d.fire({title:t,icon:"success"})},P=(t,a)=>{d.fire({title:`¿Estás seguro de eliminar ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&S(route("fases.destroy",t),{onSuccess:()=>{c("Fase eliminada.")},onError:()=>{d.fire({title:"Error",text:"No se pudo eliminar la fase.",icon:"error"})}})})},R=[{name:"#",selector:(t,a)=>a+1,sortable:!0},{name:"Nombre Fase",selector:t=>t.nombreFase,sortable:!0},{name:"Editar",cell:t=>e.jsx("button",{onClick:()=>g(2,t.id,t.nombreFase),className:"mt-2 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})},{name:"Eliminar",cell:t=>e.jsx("button",{onClick:()=>P(t.id,t.nombreFase),className:"mt-2 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})},{name:"Partidos",cell:t=>e.jsxs("a",{className:"mt-2 text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2",href:`/programacionesFaces?fase_id=${t.id}`,children:[e.jsx("i",{className:"mr-2 fa-regular fa-futbol",children:" "}),"Partidos"]})},{name:"Fotos",cell:t=>e.jsxs("a",{className:"mt-2 text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-teal-300 dark:focus:ring-teal-800 shadow-lg shadow-teal-500/50 dark:shadow-lg dark:shadow-teal-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2",href:`/gallery?fase_id=${t.id}`,children:[e.jsx("i",{className:"mr-2 fa-regular fa-image"}),"Fotos"]})}],A=b.filter(t=>t.nombreFase.toLowerCase().includes(p.toLowerCase())),I={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(_,{user:h.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fases para el torneo ",o[0].nombreTorneo," del"," ",o[0].fechaInicio," al ",o[0].fechaFin]}),children:[e.jsx(G,{title:"Fases Partidos"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(L,{onClick:()=>g(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Nueva Fase"]}),e.jsx(z,{to:route("torneo.index")})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por nombre",value:p,onChange:t=>F(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(X,{title:"Fases",columns:R,data:A,pagination:!0,highlightOnHover:!0,paginationComponentOptions:I,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay fases Registradas"})})})]}),e.jsxs(H,{show:v,onClose:l,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:j}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[e.jsx("input",{type:"text",value:n.fk_torneo,name:"fk_torneo",readOnly:!0,className:"hidden"}),e.jsx($,{htmlFor:"nombreFase",label:"Nombre",id:"nombreFase",type:"text",name:"nombreFase",ref:w,placeholder:"Nombre de la Fase",value:n.nombreFase,onChange:E,errorMessage:C.nombreFase}),e.jsxs("div",{className:"flex justify-between col-span-2 mt-1",children:[e.jsx(V,{processing:T.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(W,{onClick:l,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{me as default};
