import{r as i,W as J,j as e,Y as K}from"./app-BZ4MfUuB.js";import{S as g}from"./sweetalert2.all-Cpt_h8z6.js";import{X as Q}from"./index.es-BXVEGKkN.js";import{A as U}from"./AuthenticatedLayout-B_aZUwGG.js";import"./FormField-fnXDQpb5.js";import{S as N}from"./SelectField-DeTgE9my.js";import{M as Z}from"./Modal-Cm66vSOL.js";import{P as ee}from"./PrimaryButton-DeKf7L6r.js";import{T as oe}from"./Textarea2-CkedajoS.js";import"./Footer-DKROTaFs.js";import{G as re,C as se}from"./CancelarButton-CEeyGg3x.js";import{B as ne}from"./BackButton-DgGLzLNM.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./Dropdown-DxAQ1H4x.js";import"./transition-ujbCdl0s.js";import"./InputLabel-C_OL7V6n.js";import"./TextInput-D68xSFFS.js";import"./InputError-Bz0s8zW6.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./dialog-Bfofd0zF.js";function Ce({auth:n,torneo:h,equipo:c,inscripciones:T,fk_equipo:S,userRole:b}){const[w,v]=i.useState(!1),[C,j]=i.useState(""),[k,E]=i.useState(1),P=i.useRef(),R=i.useRef(),q=i.useRef(),d={fk_user:n.user.id,fk_torneo:"",fk_equipo:S,estadoInscripcion:"",observacion:""},{data:t,setData:l,errors:p,delete:_,post:B,put:F,processing:$}=J(d),y=o=>{const{name:r,value:s}=o.target;l(a=>({...a,[r]:s}))},I=(o,r,s,a,f,Y)=>{v(!0),E(o),o===1?(j("Realizar Pre Inscripción"),l(d)):(j("Editar Pre Inscripción"),l({id:r,fk_torneo:s,fk_equipo:a,estadoInscripcion:f,observacion:Y}))},m=()=>{v(!1),l(d)},M=o=>{o.preventDefault(),k===1?B(b==="admin"?route("inscripciones.store"):route("inscripcionesEquipo.store"),{preserveScroll:!0,onSuccess:()=>{u("Pre Inscripción realizada correctamente")}}):F(b==="admin"?route("inscripciones.update",t.id):route("inscripcionesEquipo.update",t.id),{preserveScroll:!0,onSuccess:()=>{u("Pre Inscripción actualizada correctamente")}})},u=o=>{m(),g.fire({title:o,icon:"success"})},z=[{value:"",label:"Seleccione un torneo"},...h.map(o=>({value:o.id,label:`${o.nombreTorneo} - ${o.estadoTorneo}`}))],[x,A]=i.useState(null),O=o=>{const{name:r,value:s}=o.target;if(l(a=>({...a,[r]:s})),r==="fk_torneo"){const a=h.find(f=>f.id===parseInt(s));A(a)}},L=[{value:"",label:"Seleccione un estado"},{value:"Pendiente",label:"Pendiente"},{value:"Aceptada",label:"Aceptada"},{value:"Rechazada",label:"Rechazada"}],D=(o,r)=>{g.fire({title:`¿Estás seguro de eliminar la inscripcion al torneo ${r}?`,text:"No podrás revertir esto",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&_(route("inscripciones.destroy",o),{onSuccess:()=>{u("Inscripcion eliminada correctamente")},onError:()=>{g.fire({title:"Error",text:"El jugador no ha sido eliminado",icon:"error"})}})})},G=[{name:"#",selector:(o,r)=>r+1,sortable:!0},{name:"Torneo",selector:o=>o.nombreTorneo,sortable:!0,wrap:!0},{name:"Estado",selector:o=>o.estadoInscripcion,sortable:!0,cell:o=>e.jsx("span",{className:`flex gap-x-2 rounded-full text-xs text-white py-1 px-2 ${o.estadoInscripcion==="Pendiente"?"bg-yellow-600":o.estadoInscripcion==="Aceptada"?"bg-green-600":o.estadoInscripcion==="Rechazada"?"bg-red-600":""}`,children:o.estadoInscripcion})},{name:"Observación",selector:o=>o.observacion,wrap:!0,sortable:!0},...n.user.role==="admin"?[{name:"Editar",cell:o=>e.jsx("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100 mt-2",onClick:()=>I(2,o.id,o.fk_torneo,o.fk_equipo,o.estadoInscripcion,o.observacion),children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})},{name:"Eliminar",cell:o=>e.jsx("button",{onClick:()=>D(o.id,o.nombreTorneo),className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})}]:[]],H={rows:{style:{minHeight:"72px"}},headCells:{style:{paddingLeft:"8px",paddingRight:"8px"}},cells:{style:{paddingLeft:"8px",paddingRight:"8px"}}},X={rowsPerPageText:"Filas por página",rangeSeparatorText:"de",noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},V=e.jsx("input",{type:"text",placeholder:"Buscar por Torneo",className:"p-2 border border-gray-300 rounded-lg",onChange:o=>l({...t,search:o.target.value})}),W=T.filter(o=>{var r;return o.nombreTorneo&&o.nombreTorneo.toLowerCase().includes(((r=t.search)==null?void 0:r.toLowerCase())||"")});return e.jsxs(U,{user:n.user,header:e.jsx("div",{className:"flex items-center justify-center px-2 py-1",children:e.jsxs("h2",{className:"flex items-center text-xl font-semibold leading-tight text-gray-800",children:["Pre Inscripciones equipo",["admin","equipo"].includes(n.user.role)&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`/storage/${c.escudoEquipo}`,alt:`Escudo equipo ${c.nombreEquipo}`,className:"w-10 h-10 ml-2 rounded-full"}),c.nombreEquipo]})]})}),children:[e.jsx(K,{title:"Programación Torneo"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container min-h-screen p-6 mx-auto mt-6 bg-white",children:[e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(ee,{onClick:()=>I(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Realizar Pre Inscripción"]}),e.jsx(ne,{to:route("equipos.index")})]}),e.jsxs("div",{className:"overflow-x-auto",children:[V,e.jsx(Q,{columns:G,data:W,customStyles:H,pagination:!0,paginationComponentOptions:X,highlightOnHover:!0,responsive:!0,striped:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay Inscripciones para mostrar"})})]})]}),e.jsxs(Z,{show:w,onClose:m,children:[e.jsxs("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:[C,e.jsx("img",{src:`/storage/${c.escudoEquipo}`,alt:`Escudo equipo ${c.nombreEquipo}`,className:"w-10 h-10 ml-2 rounded-full"}),c.nombreEquipo]}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[["admin","equipo"].includes(n.user.role)&&e.jsx(N,{htmlFor:"fk_torneo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Torneo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"fk_torneo",ref:P,name:"fk_torneo",value:t.fk_torneo,onChange:O,options:z,errorMessage:p.fk_torneo}),n.user.role==="equipo"&&x&&e.jsx("img",{className:"w-1/2 mx-auto mt-4 h-1/2",src:`/storage/${x.flayer}`,alt:`Torneo ⚽ ${x.nombreTorneo}`}),n.user.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{htmlFor:"estadoInscripcion",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Estado Inscripción"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"estadoInscripcion",ref:R,name:"estadoInscripcion",value:t.estadoInscripcion||"",onChange:y,options:L,errorMessage:p.estadoInscripcion}),e.jsx(oe,{htmlFor:"observacion",label:"Observación",id:"observacion",ref:q,name:"observacion",placeholder:"Observación",value:t.observacion||"",onChange:y,errorMessage:p.observacion})]}),e.jsxs("div",{className:"flex justify-between col-span-2 mt-1",children:[e.jsx(re,{processing:$.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(se,{onClick:m,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{Ce as default};
