import{r as o,W as H,j as e,Y as P}from"./app-CpscUkhH.js";import{S as m}from"./sweetalert2.all-vgUrIAgS.js";import{X as T}from"./index.es-DGAWP-pR.js";import{A as L}from"./AuthenticatedLayout-CN2hbycP.js";import{F as b}from"./FormField-CYGdgTtV.js";import{I as X}from"./ImgField-D1S6eB-Q.js";import{M as $}from"./Modal-YmEBGxuH.js";import{P as z}from"./PrimaryButton-DBRMAumo.js";import"./Footer-CUzeveoC.js";import{B as V}from"./BackButton-DOzZAPC1.js";import{G as W,C as Y}from"./CancelarButton-DhOfI6WO.js";import"./tslib.es6-BgyYHPRr.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./Dropdown-Bag3bUoI.js";import"./transition-DFaYZSng.js";import"./InputLabel-DgFhPcYt.js";import"./TextInput-BRJ60Nu1.js";import"./InputError-BhrALRB9.js";import"./dialog-B1i_YR6N.js";function pe({auth:v,galleries:y,fase:u,torneo_id:w}){const[F,h]=o.useState(!1),[N,g]=o.useState(""),[C,k]=o.useState(1),S=o.useRef(),U=o.useRef(),A=o.useRef(),p={largeUrl:null,width:"",height:"",fk_fase:u[0].id},{data:s,setData:a,errors:l,delete:B,post:x,put:q,processing:E}=H(p),f=t=>{const{name:r,value:d}=t.target;a(c=>({...c,[r]:d}))},M=t=>{a("largeUrl",t.target.files[0])},j=(t,r,d,c,D,G)=>{h(!0),k(t),t===1?(g("Agregar Foto Fase"),a(p)):(g("Editar Foto Fase"),a({id:r,largeUrl:d,width:c,height:D,fk_fase:G}))},i=()=>{h(!1)},R=t=>{t.preventDefault(),C===1?x(route("gallery.store"),{preserveScroll:!0,onSuccess:()=>{n("Foto Guardada.")}}):x(route("gallery.updatepost",s.id),{preserveScroll:!0,onSuccess:()=>{n("Foto Actualizada.")}})},n=t=>{i(),m.fire({title:t,icon:"success"})},I=t=>{m.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(r=>{r.isConfirmed&&B(route("gallery.destroy",t),{onSuccess:()=>{n("Foto Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la foto.",icon:"error"})}})})},O=[{name:"#",selector:(t,r)=>r+1,sortable:!0},{name:"Foto",selector:t=>t.largeUrl,cell:t=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:`/storage/${t.largeUrl}`,alt:t.largeUrl,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Ancho",selector:t=>t.width,sortable:!0},{name:"Alto",selector:t=>t.height,sortable:!0},{name:"Editar",cell:t=>e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>j(2,t.id,t.largeUrl,t.width,t.height,t.fk_fase),className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-red-200 via-red-300 to-yellow-200 group-hover:from-red-200 group-hover:via-red-300 group-hover:to-yellow-200   focus:ring-4 focus:outline-none focus:ring-red-100",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-edit"})})})}),ignoreRowClick:!0,allowOverflow:!0,button:!0},{name:"Eliminar",cell:t=>e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>I(t.id),className:"relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white focus:ring-4 focus:outline-none focus:ring-pink-200",children:e.jsx("span",{className:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0",children:e.jsx("i",{className:"fa-solid fa-trash"})})})}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],_={rows:{style:{minHeight:"72px"}},headCells:{style:{paddingLeft:"8px",paddingRight:"8px"}},cells:{style:{paddingLeft:"8px",paddingRight:"8px"}}};return e.jsxs(L,{user:v.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fotos de la fase ",u[0].nombreFase]}),children:[e.jsx(P,{title:"Fotos Fase"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"container flex-grow px-4 py-8 mx-auto",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsxs("div",{className:"flex justify-end mt-1 mb-4 space-x-2 sm:space-x-4",children:[e.jsxs(z,{onClick:()=>j(1),children:[e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle"}),"Agregar Foto"]}),e.jsx(V,{to:`/fases?torneo_id=${w}`})]}),e.jsx(T,{columns:O,data:y,customStyles:_,pagination:!0,highlightOnHover:!0,responsive:!0,striped:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay Fotos Para Mostrar. "})})]}),e.jsxs($,{show:F,onClose:i,children:[e.jsx("h2",{className:"p-4 text-2xl font-semibold text-white bg-gray-800 border-b border-gray-300 rounded-t-md",children:N}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsx("input",{type:"text",value:s.fk_fase,name:"fk_fase",hidden:!0,readOnly:!0}),e.jsx(X,{htmlFor:"largeUrl",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Foto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"largeUrl",name:"largeUrl",ref:S,onChange:M,value:s.largeUrl,errorMessage:l.largeUrl,imageUrl:s.largeUrl}),e.jsx(b,{htmlFor:"width",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ancho"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"width",type:"number",name:"width",ref:U,placeholder:"Ancho",value:s.width,onChange:f,errorMessage:l.width}),e.jsx(b,{htmlFor:"height",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Alto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"height",type:"number",name:"height",ref:A,placeholder:"Alto",value:s.height,onChange:f,errorMessage:l.height}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(W,{processing:E.toString(),className:"px-4 py-2 mt-2",children:"Guardar"}),e.jsx(Y,{onClick:i,className:"px-4 py-2 mt-2",children:"Cancelar"})]})]})]})]})})]})}export{pe as default};
